!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)__webpack_require__.d(n,o,function(t){return e[t]}.bind(null,o));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=75)}([function(e,t,n){e.exports=n(67)(1)},function(e,t,n){e.exports=n(5)(0)},function(e,t,n){"use strict";n(16);var o=n(17);n.d(t,"AssetsService",function(){return o.a});var i=n(18);n.d(t,"CMSModesService",function(){return i.a});var s=n(10);n.d(t,"TypePermissionsRestService",function(){return s.a});var r=n(19);n.d(t,"AttributePermissionsRestService",function(){return r.a});var a=n(20);n.d(t,"CMSTimeService",function(){return a.a});n(29),n(8);var c=n(21);n.d(t,"IComponentSharedService",function(){return c.a});var l=n(7);n.d(t,"IContextAwareEditableItemService",function(){return l.a}),n.d(t,"IPageService",function(){return l.b}),n.d(t,"slotEvictionTag",function(){return l.c});var d=n(6);n.o(d,"CmsConstantsModule")&&n.d(t,"CmsConstantsModule",function(){return d.CmsConstantsModule}),n.o(d,"SlotStatus")&&n.d(t,"SlotStatus",function(){return d.SlotStatus});var u=n(28);n.d(t,"CmsConstantsModule",function(){return u.a})},function(e,t,n){e.exports=n(5)(1)},function(e,t,n){e.exports=n(5)(249)},function(e,t){e.exports=vendor_chunk},function(e,t,n){"use strict";n(22),n(11),n(23);var o=n(24);n.o(o,"CMSItem")&&n.d(t,"CMSItem",function(){return o.CMSItem}),n.o(o,"CmsConstantsModule")&&n.d(t,"CmsConstantsModule",function(){return o.CmsConstantsModule}),n.o(o,"SlotStatus")&&n.d(t,"SlotStatus",function(){return o.SlotStatus});n(25);var i=n(26);n.d(t,"SlotStatus",function(){return i.a})},function(e,t,n){"use strict";var o=function(){function IPageService(){}return IPageService.prototype.getPageById=function(e){"proxyFunction";return null},IPageService.prototype.getPageByUuid=function(e){"proxyFunction";return null},IPageService.prototype.getCurrentPageInfo=function(){"proxyFunction";return null},IPageService.prototype.getCurrentPageInfoByVersion=function(e){"proxyFunction";return null},IPageService.prototype.isPagePrimary=function(e){"proxyFunction";return null},IPageService.prototype.isPagePrimaryWithContext=function(e,t){"proxyFunction";return null},IPageService.prototype.getPrimaryPage=function(e){"proxyFunction";return null},IPageService.prototype.getPrimaryPagesForPageType=function(e,t){"proxyFunction";return null},IPageService.prototype.getVariationPages=function(e){"proxyFunction";return null},IPageService.prototype.updatePageById=function(e,t){"proxyFunction";return null},IPageService.prototype.forcePageApprovalStatus=function(e){"proxyFunction";return null},IPageService.prototype.isPageApproved=function(e){"proxyFunction";return null},IPageService.prototype.buildUriContextForCurrentPage=function(){"proxyFunction";return null},IPageService}(),i=n(0),s=(new i.EvictionTag({event:"WORKFLOW_FINISHED_EVENT"}),new i.EvictionTag({event:"WORKFLOW_TASKS_MENU_OPENED_EVENT"}),new i.EvictionTag({event:"SLOT_UPDATE_EVENT"})),r=function(){function IContextAwareEditableItemService(){}return IContextAwareEditableItemService.prototype.isItemEditable=function(e){"proxyFunction";return null},IContextAwareEditableItemService}();n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function IPageContentSlotsComponentsRestService(){}return IPageContentSlotsComponentsRestService.prototype.clearCache=function(){"proxyFunction"},IPageContentSlotsComponentsRestService.prototype.getSlotsToComponentsMapForPageUid=function(e){"proxyFunction";return null},IPageContentSlotsComponentsRestService.prototype.getComponentsForSlot=function(e){"proxyFunction";return null},IPageContentSlotsComponentsRestService}()},function(e,t){e.exports=angular},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o,i=n(1),s=n(0);!function(e){e.CREATE="create",e.READ="read",e.CHANGE="change",e.REMOVE="remove"}(o||(o={}));var r=function(){function TypePermissionsRestService(e,t,n,o){this.$log=e,this.$q=t,this.sessionService=n,this.URI="/permissionswebservices/v1/permissions/principals/:user/types",this.resource=o.get(this.URI)}var e,t,n,r,a;return TypePermissionsRestService.$inject=["$log","$q","sessionService","restServiceFactory"],TypePermissionsRestService.prototype.hasCreatePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,o.CREATE)},TypePermissionsRestService.prototype.hasReadPermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,o.READ)},TypePermissionsRestService.prototype.hasUpdatePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,o.CHANGE)},TypePermissionsRestService.prototype.hasDeletePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,o.REMOVE)},TypePermissionsRestService.prototype.hasAllPermissionsForTypes=function(e){var t=this,n={};return this._getAllPermissionsForTypes(e).then(function(e){return e.reduce(function(e,n){return n.permissions&&(e[n.id]={},e[n.id][o.READ]=t._getPermissionByNameAndResult(n,o.READ),e[n.id][o.CHANGE]=t._getPermissionByNameAndResult(n,o.CHANGE),e[n.id][o.CREATE]=t._getPermissionByNameAndResult(n,o.CREATE),e[n.id][o.REMOVE]=t._getPermissionByNameAndResult(n,o.REMOVE)),e},n)})},TypePermissionsRestService.prototype._getPermissionByNameAndResult=function(e,t){return JSON.parse(e.permissions.find(function(e){return e.key===t}).value)},TypePermissionsRestService.prototype._getPermissionsForTypesAndName=function(e,t){var n=this;return this._getAllPermissionsForTypes(e).then(function(e){return e.reduce(function(e,o){return o.permissions&&(e[o.id]=n._getPermissionByNameAndResult(o,t)),e},{})})},TypePermissionsRestService.prototype._getAllPermissionsForTypes=function(e){var t=this;return e.length<=0?this.$q.when([]):this.sessionService.getCurrentUsername().then(function(n){return n?t.resource.get({user:n,types:e.join(","),permissionNames:o.CREATE+","+o.CHANGE+","+o.READ+","+o.REMOVE}).then(function(e){return e.permissionsList||[]},function(n){return n&&t.$log.error("TypePermissionsRestService - no composed types "+e+" exist"),t.$q.reject(n)}):[]})},i.__decorate([Object(s.Cached)({actions:[s.rarelyChangingContent],tags:[s.authorizationEvictionTag]}),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[Array]),i.__metadata("design:returntype","function"==typeof(e="undefined"!=typeof angular&&angular.IPromise)?e:Object)],TypePermissionsRestService.prototype,"_getAllPermissionsForTypes",null),TypePermissionsRestService=i.__decorate([Object(s.SeInjectable)(),i.__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof angular&&angular.ILogService)?t:Object,"function"==typeof(n="undefined"!=typeof angular&&angular.IQService)?n:Object,"function"==typeof(r=void 0!==s.ISessionService&&s.ISessionService)?r:Object,"function"==typeof(a=void 0!==s.IRestServiceFactory&&s.IRestServiceFactory)?a:Object])],TypePermissionsRestService)}()},function(e,t){},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function toString(){return this.map(function(t){var n=function cssWithMappingToString(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=function toComment(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(o),s=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(s).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(i=0;i<e.length;i++){var r=e[i];null!=r[0]&&o[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(e,t,n){var o={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),s=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var o=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),r=null,a=0,c=[],l=n(70);function addStylesToDom(e,t){for(var n=0;n<e.length;n++){var i=e[n],s=o[i.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](i.parts[r]);for(;r<i.parts.length;r++)s.parts.push(addStyle(i.parts[r],t))}else{var a=[];for(r=0;r<i.parts.length;r++)a.push(addStyle(i.parts[r],t));o[i.id]={id:i.id,refs:1,parts:a}}}}function listToStyles(e,t){for(var n=[],o={},i=0;i<e.length;i++){var s=e[i],r=t.base?s[0]+t.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};o[r]?o[r].parts.push(a):n.push(o[r]={id:r,parts:[a]})}return n}function insertStyleElement(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=c[c.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertAt.before,n);n.insertBefore(t,i)}}function removeStyleElement(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function createStyleElement(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function getNonce(){0;return n.nc}();o&&(e.attrs.nonce=o)}return addAttrs(t,e.attrs),insertStyleElement(e,t),t}function addAttrs(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function addStyle(e,t){var n,o,i,s;if(t.transform&&e.css){if(!(s="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=s}if(t.singleton){var c=a++;n=r||(r=createStyleElement(t)),o=applyToSingletonTag.bind(null,n,c,!1),i=applyToSingletonTag.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function createLinkElement(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",addAttrs(t,e.attrs),insertStyleElement(e,t),t}(t),o=function updateLink(e,t,n){var o=n.css,i=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||s)&&(o=l(o));i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}.bind(null,n,t),i=function(){removeStyleElement(n),n.href&&URL.revokeObjectURL(n.href)}):(n=createStyleElement(t),o=function applyToTag(e,t){var n=t.css,o=t.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){removeStyleElement(n)});return o(e),function updateStyle(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=listToStyles(e,t);return addStylesToDom(n,t),function update(e){for(var i=[],s=0;s<n.length;s++){var r=n[s];(a=o[r.id]).refs--,i.push(a)}e&&addStylesToDom(listToStyles(e,t),t);for(s=0;s<i.length;s++){var a;if(0===(a=i[s]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete o[a.id]}}}};var d=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function applyToSingletonTag(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var s=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}},function(e,t){e.exports=moment},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function AssetsService(e){this.TEST_ASSETS_KEY="testAssets",this.TEST_ASSETS_SRC="/web/webroot",this.PROD_ASSETS_SRC="/cmssmartedit",this.$injector=e}return AssetsService.prototype.getAssetsRoot=function(){var e=!1;if(this.getInjector().has(this.TEST_ASSETS_KEY)){var t=this.getInjector().get(this.TEST_ASSETS_KEY);e="boolean"==typeof t&&t}return e?this.TEST_ASSETS_SRC:this.PROD_ASSETS_SRC},AssetsService.prototype.getInjector=function(){return this.$injector},AssetsService.$inject=["$injector"],AssetsService}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(1),i=n(0),s=function(){function CMSModesService(e){this.perspectiveService=e}var e;return CMSModesService.$inject=["perspectiveService"],e=CMSModesService,CMSModesService.prototype.isVersioningPerspectiveActive=function(){return this.perspectiveService.getActivePerspectiveKey().then(function(t){return t===e.VERSIONING_PERSPECTIVE_KEY})},CMSModesService.BASIC_PERSPECTIVE_KEY="se.cms.perspective.basic",CMSModesService.ADVANCED_PERSPECTIVE_KEY="se.cms.perspective.advanced",CMSModesService.VERSIONING_PERSPECTIVE_KEY="se.cms.perspective.versioning",CMSModesService=e=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",[Object])],CMSModesService)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o,i=n(1),s=n(4),r=n(0);!function(e){e.READ="read",e.CHANGE="change"}(o||(o={}));var a=function(){function AttributePermissionsRestService(e,t,n,o,i){this.sessionService=t,this.$q=n,this.$log=o,this.lodash=i,this.ATTRIBUTE_PERMISSIONS_URI="/permissionswebservices/v1/permissions/principals/:user/attributes",this.attributePermissionsRestService=e.get(this.ATTRIBUTE_PERMISSIONS_URI)}var e,t,n,a,c,l;return AttributePermissionsRestService.$inject=["restServiceFactory","sessionService","$q","$log","lodash"],AttributePermissionsRestService.prototype.hasReadPermissionOnAttributesInType=function(e,t){return this.getPermissionsForAttributesAndNameByType(e,t,o.READ)},AttributePermissionsRestService.prototype.hasChangePermissionOnAttributesInType=function(e,t){return this.getPermissionsForAttributesAndNameByType(e,t,o.CHANGE)},AttributePermissionsRestService.prototype.getPermissionsForAttributesAndNameByType=function(e,t,n){var o=t.map(function(t){return e+"."+t});return this.getPermissionsForAttributesAndName(o,n).then(function(t){return t[e]})},AttributePermissionsRestService.prototype.getPermissionsForAttributesAndName=function(e,t){var n=this;return this.getAllPermissionsForAttributes(e).then(function(o){return n.concatPermissionsNotFound(e,o).reduce(function(e,o){if(o.permissions){var i=n.parsePermissionsResultId(o.id);e[i.type]||(e[i.type]={}),e[i.type][i.attribute]=n.getPermissionByNameFromResult(o,t)}return e},{})})},AttributePermissionsRestService.prototype.parsePermissionsResultId=function(e){var t=e.split(".");if(2!==t.length)throw new Error("AttributePermissionsRestService - Received invalid attribute permissions");return{type:t[0],attribute:t[1]}},AttributePermissionsRestService.prototype.getPermissionByNameFromResult=function(e,t){return JSON.parse(e.permissions.find(function(e){return e.key===t}).value)},AttributePermissionsRestService.prototype.concatPermissionsNotFound=function(e,t){var n=t.map(function(e){return e.id}),i=this.lodash.difference(e,n);return t.concat(i.map(function(e){return{id:e,permissions:[{key:o.READ,value:"false"},{key:o.CHANGE,value:"false"}]}}))},AttributePermissionsRestService.prototype.getAllPermissionsForAttributes=function(e){var t=this;return e.length<=0?this.$q.when([]):this.sessionService.getCurrentUsername().then(function(n){return n?t.attributePermissionsRestService.get({user:n,attributes:e.join(","),permissionNames:o.CHANGE+","+o.READ}).then(function(e){return e.permissionsList||[]},function(n){return n&&t.$log.error("AttributePermissionsRestService - couldn't retrieve attribute permissions "+e),t.$q.reject(n)}):[]})},i.__decorate([Object(r.Cached)({actions:[r.rarelyChangingContent],tags:[r.authorizationEvictionTag]}),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[Array]),i.__metadata("design:returntype","function"==typeof(e="undefined"!=typeof angular&&angular.IPromise)?e:Object)],AttributePermissionsRestService.prototype,"getAllPermissionsForAttributes",null),AttributePermissionsRestService=i.__decorate([Object(r.SeInjectable)(),i.__metadata("design:paramtypes",["function"==typeof(t=void 0!==r.IRestServiceFactory&&r.IRestServiceFactory)?t:Object,"function"==typeof(n=void 0!==r.ISessionService&&r.ISessionService)?n:Object,"function"==typeof(a="undefined"!=typeof angular&&angular.IQService)?a:Object,"function"==typeof(c="undefined"!=typeof angular&&angular.ILogService)?c:Object,"function"==typeof(l=void 0!==s&&s.LoDashStatic)?l:Object])],AttributePermissionsRestService)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(1),i=n(14),s=n(0),r=function(){function CMSTimeService(e){this.$translate=e}var e,t;return CMSTimeService.$inject=["$translate"],CMSTimeService.prototype.getTimeAgo=function(e){var t=Math.floor(i.duration(e).asDays()),n=Math.floor(i.duration(e).asHours());return t>=1?t+" "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.days.ago"):n>=1?n+" "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.hours.ago"):"<1 "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.hours.ago")},CMSTimeService=o.__decorate([Object(s.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof angular&&void 0!==(e=angular.translate)&&e.ITranslateService)?t:Object])],CMSTimeService)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function IComponentSharedService(){}return IComponentSharedService.prototype.isComponentShared=function(e){"proxyFunction";return null},IComponentSharedService}()},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var o,i,s;!function(e){e.ContentPage="ContentPage",e.CategoryPage="CategoryPage",e.ProductPage="ProductPage",e.EmailPage="EmailPage"}(o||(o={})),function(e){e.ACTIVE="ACTIVE",e.DELETED="DELETED"}(i||(i={})),function(e){e.APPROVED="APPROVED",e.CHECK="CHECK",e.UNAPPROVED="UNAPPROVED"}(s||(s={}))},function(e,t,n){"use strict";var o;n.d(t,"a",function(){return o}),function(e){e.TEMPLATE="TEMPLATE",e.PAGE="PAGE",e.OVERRIDE="OVERRIDE"}(o||(o={}))},function(e,t){e.exports='<div class="sync-indicator-decorator"\n    [ngClass]="syncStatus.status"\n    [attr.sync-status]="syncStatus.status">\n    <ng-content class="se-wrapper-data"></ng-content>\n</div>'},function(e,t,n){"use strict";var o=n(1),i=n(0),s=(n(68),{UNAVAILABLE:"UNAVAILABLE",IN_SYNC:"IN_SYNC",NOT_SYNC:"NOT_SYNC",IN_PROGRESS:"IN_PROGRESS",SYNC_FAILED:"SYNC_FAILED"}),r={SLOW_POLLING_TIME:2e4,FAST_POLLING_TIME:4e3,SPEED_UP:"syncPollingSpeedUp",SLOW_DOWN:"syncPollingSlowDown",FAST_FETCH:"syncFastFetch",FETCH_SYNC_STATUS_ONCE:"fetchSyncStatusOnce"},a={CATALOG_SYNCHRONIZED:"CATALOG_SYNCHRONIZED_EVENT"};n.d(t,"a",function(){return c});var c=function(){function CmsConstantsModule(){}return CmsConstantsModule=o.__decorate([Object(i.SeModule)({providers:[i.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_STATUSES:s}),i.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_POLLING:r}),i.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_EVENT:a})]})],CmsConstantsModule)}()},function(e,t,n){"use strict";var o=n(1),i=n(0),s=function(){function VersionExperienceInterceptor(e,t,n){this.TYPES_RESOURCE_URI=e,this.interceptorHelper=t,this.sharedDataService=n,this.request=this.request.bind(this)}var e,t;return VersionExperienceInterceptor.$inject=["TYPES_RESOURCE_URI","interceptorHelper","sharedDataService"],e=VersionExperienceInterceptor,VersionExperienceInterceptor.prototype.request=function(t){var n=this;return this.isGET(t)&&this.isPreviewDataTypeResourceEndpoint(t.url)?this.interceptorHelper.handleRequest(t,function(){return n.sharedDataService.get("experience").then(function(n){return n.versionId&&(t.url=t.url.replace(e.MODE_DEFAULT,e.MODE_PREVIEW_VERSION)),t})}):t},VersionExperienceInterceptor.prototype.isGET=function(e){return"GET"===e.method},VersionExperienceInterceptor.prototype.isPreviewDataTypeResourceEndpoint=function(t){return t.indexOf(this.TYPES_RESOURCE_URI)>-1&&t.indexOf(e.PREVIEW_DATA_TYPE)>-1},VersionExperienceInterceptor.MODE_DEFAULT="DEFAULT",VersionExperienceInterceptor.MODE_PREVIEW_VERSION="PREVIEWVERSION",VersionExperienceInterceptor.PREVIEW_DATA_TYPE="PreviewData",VersionExperienceInterceptor=e=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",[String,Object,"function"==typeof(t=void 0!==i.ISharedDataService&&i.ISharedDataService)?t:Object])],VersionExperienceInterceptor)}();!function(){function VersionExperienceInterceptorModule(){}VersionExperienceInterceptorModule=o.__decorate([Object(i.SeModule)({imports:["interceptorHelperModule"],providers:[s],config:["$httpProvider",function(e){"ngInject";e.interceptors.push(i.diNameUtils.buildServiceName(s))}]})],VersionExperienceInterceptorModule)}()},function(e,t,n){e.exports=n(5)(72)},function(e,t,n){e.exports=n(5)(244)},function(e,t,n){var o={"./components/externalComponent/externalComponentButton.js":33,"./components/externalComponent/externalComponentDecorator.js":34,"./components/slotShared/slotSharedButton.js":35,"./components/slotSharedDisabled/externalSlotDisabledDecorator.js":36,"./components/slotSharedDisabled/sharedSlotDisabledDecorator.js":37,"./components/slotSharedDisabled/slotDisabledComponent.js":38,"./components/slotUnshared/slotUnsharedButton.js":39,"./components/slotVisibility/hiddenComponentMenu/hiddenComponentMenu.js":40,"./components/slotVisibility/slotVisibilityButton.js":41,"./components/slotVisibility/slotVisibilityComponent.js":42,"./components/synchronize/slots/slotSyncButton.js":43,"./services/componentInfoService.js":44,"./services/componentVisibilityAlertService.js":45,"./services/contextualMenuDropdownService.js":46,"./services/dragAndDrop/cmsDragAndDropService.js":47,"./services/dragAndDrop/componentEditingFacadeService.js":48,"./services/dragAndDrop/slotRestrictionsService.js":49,"./services/editorEnablerService.js":50,"./services/pageContentSlotsService.js":51,"./services/removeComponentService.js":52,"./services/slotSharedService.js":53,"./services/slotSynchronizationService.js":54,"./services/slotUnsharedService.js":55,"./services/slotVisibilityService.js":56,"./templates.js":57};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=32},function(e,t){angular.module("externalComponentButtonModule",["l10nModule","smarteditServicesModule"]).controller("externalComponentButtonController",["l10nFilter","catalogService",function(e,t){this.$onInit=function(){return this.isReady=!1,t.getCatalogVersionByUuid(this.catalogVersionUuid).then(function(t){this.catalogVersion=e(t.catalogName)+" ("+t.version+")",this.isReady=!0}.bind(this))}}]).component("externalComponentButton",{templateUrl:"externalComponentButtonTemplate.html",controller:"externalComponentButtonController",controllerAs:"ctrl",bindings:{catalogVersionUuid:"<"}})},function(e,t){angular.module("externalComponentDecoratorModule",["functionsModule","cmsSmarteditServicesModule","yPopoverModule"]).controller("externalComponentDecoratorController",["$element","$translate","$log","l10nFilter","CONTENT_SLOT_TYPE","componentHandlerService","catalogService","cMSModesService",function(e,t,n,o,i,s,r,a){this.$onInit=function(){var t=s.getParentSlotForComponent(e);this.isExtenalSlot=s.isExternalComponent(t,i),this.isReady=!1,a.isVersioningPerspectiveActive().then(function(e){this.isVersioningPerspective=e,r.getCatalogVersionByUuid(this.componentAttributes.smarteditCatalogVersionUuid).then(function(e){this.catalogVersionText=o(e.catalogName)+" ("+e.version+")",this.isReady=!0}.bind(this),function(){n.error("externalComponentDecorator - cannot find catalog version for uuid",this.componentAttributes.smarteditCatalogVersionUuid)}.bind(this))}.bind(this))},this.getTooltipTemplate=function(){return"<div class='external-component-decorator__tooltip'>"+t.instant("se.cms.from.external.catalog.version",{catalogVersion:this.catalogVersionText})+"</div>"}}]).directive("externalComponentDecorator",function(){return{templateUrl:"externalComponentDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(e,t){angular.module("slotSharedButtonModule",["slotSharedServiceModule","translationServiceModule","smarteditServicesModule","seConstantsModule","hasOperationPermissionModule"]).controller("slotSharedButtonController",["slotSharedService","$window","crossFrameEventService","EVENT_OUTER_FRAME_CLICKED",function(e,t,n,o){this.slotSharedFlag=!1,this.buttonName="slotSharedButton",this.isPopupOpened=!1,this.isPopupOpenedPreviousValue=!1,this.$onInit=function(){this.slotAttributes={smarteditComponentId:this.componentAttributes.smarteditComponentId,contentSlotUuid:this.componentAttributes.smarteditComponentUuid,componentType:this.componentAttributes.smarteditComponentType,catalogVersionUuid:this.componentAttributes.smarteditCatalogVersionUuid},e.isSlotShared(this.slotId).then(function(e){this.slotSharedFlag=e}.bind(this)),this.unregFn=n.subscribe(o,function(){this.isPopupOpened=!1}.bind(this))},this.$doCheck=function(){this.isPopupOpenedPreviousValue!==this.isPopupOpened&&(this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened}),this.isPopupOpenedPreviousValue=this.isPopupOpened)},this.convertToNonSharedSlotAndCloneComponents=function(){e.convertSharedSlotToNonSharedSlot(this.slotAttributes,!0).then(function(){this.isPopupOpened=!1,t.location.reload()}.bind(this))},this.convertToNonSharedSlotAndRemoveComponents=function(){e.convertSharedSlotToNonSharedSlot(this.slotAttributes,!1).then(function(){this.isPopupOpened=!1,t.location.reload()}.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).component("slotSharedButton",{templateUrl:"slotSharedButtonTemplate.html",controller:"slotSharedButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@",componentAttributes:"<"}})},function(e,t){angular.module("externalSlotDisabledDecoratorModule",["slotDisabledDecoratorModule"]).directive("externalSlotDisabledDecorator",function(){return{templateUrl:"externalSlotDisabledDecoratorTemplate.html",transclude:!0,restrict:"C",controllerAs:"ctrl",controller:function(){},scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(e,t){angular.module("sharedSlotDisabledDecoratorModule",["slotDisabledDecoratorModule"]).directive("sharedSlotDisabledDecorator",function(){return{templateUrl:"sharedSlotDisabledDecoratorTemplate.html",transclude:!0,restrict:"C",controllerAs:"ctrl",controller:function(){},scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(e,t){angular.module("slotDisabledDecoratorModule",["yPopoverModule","l10nModule","cmsSmarteditServicesModule"]).controller("slotDisabledComponentController",["$translate","pageInfoService","catalogService","l10nFilter","cMSModesService",function(e,t,n,o,i){var s="hyicon-globe",r="hyicon-linked";this.$onInit=function(){this.isReady=!1,this._checkIfSlotIsInherited(),this._getSourceCatalogName(),this._isVersioningPerspectiveActive()},this._checkIfSlotIsInherited=function(){var e=this.componentAttributes.smarteditCatalogVersionUuid;t.getCatalogVersionUUIDFromPage().then(function(t){this.isExternalSlot=e!==t}.bind(this))},this._getSourceCatalogName=function(){var e=this.componentAttributes.smarteditCatalogVersionUuid;n.getCatalogVersionByUuid(e).then(function(e){this.catalogName=e.catalogName}.bind(this))},this._isVersioningPerspectiveActive=function(){i.isVersioningPerspectiveActive().then(function(e){this.isVersioningPerspective=e,this.isReady=!0}.bind(this))},this.getPopoverMessage=function(){var t;t=this.isVersioningPerspective?this.isExternalSlot?"se.cms.versioning.global.shared.slot.from.label":"se.cms.versioning.shared.slot.from.label":this.isExternalSlot?"se.cms.externalsharedslot.decorator.label":"se.cms.sharedslot.decorator.label";var n={catalogName:o(this.catalogName),slotId:this.componentAttributes.smarteditComponentId};return e.instant(t,n)},this.getSlotIconClass=function(){var e="";return this.active?e=this.isExternalSlot?s:r:void 0!==this.isExternalSlot&&(e=this.isExternalSlot?s:r),e},this.getOuterSlotClass=function(){return this.getSlotIconClass()===s?"disabled-shared-slot__icon--outer-globe":""}.bind(this)}]).component("slotDisabledComponent",{templateUrl:"slotDisabledTemplate.html",controller:"slotDisabledComponentController",controllerAs:"ctrl",bindings:{active:"=",componentAttributes:"<"}})},function(e,t){angular.module("slotUnsharedButtonModule",["slotUnsharedServiceModule","translationServiceModule","confirmationModalServiceModule","smarteditServicesModule","seConstantsModule","hasOperationPermissionModule"]).controller("slotUnsharedButtonController",["$scope","$window","EVENT_OUTER_FRAME_CLICKED","slotUnsharedService","confirmationModalService","crossFrameEventService",function(e,t,n,o,i,s){this.revertToSharedSlot=function(){i.confirm({title:"se.cms.slot.unshared.revert.to.shared.title",templateUrl:"revertToSharedSlotConfirmationTemplate.html"}).then(function(){o.revertToSharedSlot(this.slotUuid).then(function(){this.isPopupOpened=!1,t.location.reload()}.bind(this))}.bind(this))},this.$onInit=function(){this.slotUnsharedFlag=!1,this.buttonName="slotUnsharedButton",this.isPopupOpened=!1,this.isPopupOpenedOldValue=this.isPopupOpened,o.isSlotUnshared(this.slotUid).then(function(e){this.slotUnsharedFlag=e}.bind(this)),this.unregFn=s.subscribe(n,function(){this.isPopupOpened=!1}.bind(this))},this.$doCheck=function(){this.isPopupOpenedOldValue!==this.isPopupOpened&&(this.isPopupOpenedOldValue=this.isPopupOpened,this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened}))},this.$onDestroy=function(){this.unregFn()}}]).component("slotUnsharedButton",{templateUrl:"slotUnsharedButtonTemplate.html",controller:"slotUnsharedButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotUuid:"@",slotUid:"@"}})},function(e,t){angular.module("hiddenComponentMenuModule",["yPopupOverlayModule","yLoDashModule"]).constant("HIDDEN_COMPONENT_OPENED_EVENT","HIDDEN_COMPONENT_OPENED_EVENT").controller("hiddenComponentMenuController",["lodash","hiddenComponentMenuService","systemEventService","componentHandlerService","HIDDEN_COMPONENT_OPENED_EVENT","CONTENT_SLOT_TYPE",function(e,t,n,o,i,s){this.$onInit=function(){var r=o.getOriginalComponent(this.slotId,s);this.slotUuid=o.getUuid(r),this.isMenuOpen=!1,t.getItemsForHiddenComponent(this.component,this.slotId).then(function(t){this.configuration=e.cloneDeep(t.configuration),this.configuration.slotUuid=this.slotUuid,this.menuItems=e.cloneDeep(t.buttons)}.bind(this)),this.unRegRemoveComponentOpenedEvent=n.subscribe(i,this.onOtherMenuOpening)},this.$onDestroy=function(){this.unRegRemoveComponentOpenedEvent()},this.popupConfig={templateUrl:"hiddenComponentMenuItemsTemplate.html",halign:"left",valign:"bottom"},this.onButtonClick=function(e){e.stopPropagation(),this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&n.publishAsync(i,{componentId:this.component.uid,slotId:this.slotId})}.bind(this),this.onMenuHide=function(){this.isMenuOpen=!1}.bind(this),this.onOtherMenuOpening=function(e,t){var n=this.component.uid===t.componentId,o=this.slotId===t.slotId;n&&o||(this.isMenuOpen=!1)}.bind(this),this.executeItemCallback=function(e,t){e.action&&(e.action.callback(this.configuration,t),this.isMenuOpen=!1)}}]).component("hiddenComponentMenu",{templateUrl:"hiddenComponentMenuTemplate.html",transclude:!1,controller:"hiddenComponentMenuController",controllerAs:"ctrl",bindings:{component:"<",slotId:"<"}})},function(e,t){angular.module("slotVisibilityButtonModule",["cmssmarteditTemplates","slotVisibilityServiceModule","slotVisibilityComponentModule","seConstantsModule"]).controller("slotVisibilityButtonController",["slotVisibilityService","$scope","sharedDataService","$translate","crossFrameEventService","EVENT_OUTER_FRAME_CLICKED",function(e,t,n,o,i,s){this.buttonName="slotVisibilityButton",this.eyeOnImageClass="sap-icon--show",this.eyeOffImageClass="sap-icon--hide",this.eyeImageClass=this.eyeOffImageClass,this.buttonVisible=!1,this.hiddenComponents=[],this.isComponentListOpened=!1,t.$watch("ctrl.isComponentListOpened",function(e,t){this.eyeImageClass=e?this.eyeOnImageClass:this.eyeOffImageClass,e!==t&&this.setRemainOpen({button:this.buttonName,remainOpen:this.isComponentListOpened})}.bind(this)),this.markExternalComponents=function(e,t){t.forEach(function(t){t.isExternal=t.catalogVersion!==e.pageContext.catalogVersionUuid})},this.getTemplateInfoForExternalComponent=function(){return"<div>"+o.instant("se.cms.slotvisibility.external.component")+"</div>"},this.onInsideClick=function(e){e.stopPropagation()},this.$onInit=function(){e.getHiddenComponents(this.slotId).then(function(e){n.get("experience").then(function(t){this.hiddenComponents=e,this.markExternalComponents(t,this.hiddenComponents),this.hiddenComponentCount=e.length,this.hiddenComponentCount>0&&(this.buttonVisible=!0)}.bind(this))}.bind(this)),this.unregFn=i.subscribe(s,function(){this.isComponentListOpened=!1}.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).component("slotVisibilityButton",{templateUrl:"slotVisibilityButtonTemplate.html",transclude:!0,controller:"slotVisibilityButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@",initButton:"@"}})},function(e,t){angular.module("slotVisibilityComponentModule",["componentVisibilityAlertServiceModule","cmsSmarteditServicesModule","catalogVersionPermissionModule","hiddenComponentMenuModule"]).controller("slotVisibilityComponentController",["$injector","componentVisibilityAlertService","editorModalService","catalogService","catalogVersionPermissionService","componentSharedService","domain",function(e,t,n,o,i,s,r){this.openEditorModal=function(){n.openAndRerenderSlot(this.component.typeCode,this.component.uuid,"visible").then(function(e){t.checkAndAlertOnComponentVisibility({itemId:e.uuid,itemType:e.itemtype,catalogVersion:e.catalogVersion,restricted:e.restricted,slotId:this.slotId,visible:e.visible})}.bind(this))},this.$onInit=function(){this.isReady=!1,this.imageRoot=r+"/cmssmartedit/images",s.isComponentShared(this.component).then(function(e){this.isSharedComponent=e}.bind(this)),o.getCatalogVersionByUuid(this.component.catalogVersion).then(function(e){i.hasWritePermission(e.catalogId,e.version).then(function(e){this.readOnly=!e||this.component.isExternal,this.componentVisibilitySwitch=this.component.visible?"se.cms.component.visibility.status.on":"se.cms.component.visibility.status.off",this.componentRestrictionsCount="("+(this.component.restrictions?this.component.restrictions.length:0)+")",this.isReady=!0}.bind(this))}.bind(this))}}]).component("slotVisibilityComponent",{templateUrl:"slotVisibilityComponentTemplate.html",transclude:!1,controller:"slotVisibilityComponentController",controllerAs:"ctrl",bindings:{component:"=",slotId:"@",componentId:"@"}})},function(e,t){angular.module("slotSyncButtonModule",["slotSynchronizationServiceModule","seConstantsModule","cmsComponentsModule"]).controller("slotSyncButtonController",["$scope","$translate","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","EVENT_OUTER_FRAME_CLICKED","catalogService","slotSynchronizationService","pageInfoService","crossFrameEventService",function(e,t,n,o,i,s,r,a,c){e.$watch("ctrl.isPopupOpened",function(){this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened})}.bind(this)),this.statusIsInSync=function(e){return e.status&&e.status===o.IN_SYNC},this.getSyncStatus=function(){a.getPageUUID().then(function(e){r.getSyncStatus(e,this.slotId).then(function(e){this.isSlotInSync=this.statusIsInSync(e),this.newPageIsNotSynchronized=!e.lastSyncStatus,this.ready=!0}.bind(this))}.bind(this))}.bind(this),this.updateStatus=function(e,t){var n=(t.selectedDependencies||[]).concat(t.sharedDependencies||[]).find(function(e){return e.itemId===this.slotId}.bind(this))||{};this.isSlotInSync=this.statusIsInSync(n)};var l=this.getSyncStatus;this.$onInit=function(){this.buttonName="slotSyncButton",this.isPopupOpened=!1,this.newPageIsNotSynchronized=!1,this.ready=!1,this.isSlotInSync=!0,this.getSyncStatus(),this.unRegisterSyncPolling=c.subscribe(n.FAST_FETCH,l),this.newPageIsNotSynchronizedTemplate="<div class='se-popover--inner-content'>"+t.instant("se.cms.slot.sync.from.page.level")+"</div>",this.unregFn=c.subscribe(i,function(){this.isPopupOpened=!1}.bind(this))},this.$onDestroy=function(){this.unRegisterSyncPolling(),this.unregFn()}}]).component("slotSyncButton",{templateUrl:"slotSyncButtonTemplate.html",controller:"slotSyncButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@"}})},function(e,t){angular.module("componentInfoServiceModule",["yjqueryModule","yLoDashModule","cmsSmarteditServicesModule","renderServiceInterfaceModule"]).service("componentInfoService",["$log","$q","yjQuery","lodash","crossFrameEventService","cmsitemsRestService","UUID_ATTRIBUTE","EVENTS","OVERLAY_RERENDERED_EVENT","COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","COMPONENT_REMOVED_EVENT",function(e,t,n,o,i,s,r,a,c,l,d,u){var p={},m={};this.getById=function(e,n){if(n||p[e]||document.querySelectorAll("["+r+"='"+e+"']").length||(n=!0),p[e])return t.when(p[e]);if(n)return s.getById(e).then(function(t){return this._resolvePromises(t),p[e]}.bind(this),function(t){throw this._rejectPromises([e],t),t}.bind(this));var o=m[e]||t.defer();return m[e]||(m[e]=o),o.promise},this._resolvePromises=function(e){(e.response?e.response:[e]).forEach(function(e){p[e.uuid]=e,m[e.uuid]&&(m[e.uuid].resolve(e),delete m[e.uuid])})},this._rejectPromises=function(t,n){e.error("componentInfoService:: getById error:",n.message),t.forEach(function(e){m[e]&&(m[e].reject(n),delete m[e])})},this._getComponentsDataByUUIDs=function(e){s.getByIds(e).then(this._resolvePromises,function(t){this._rejectPromises(e,t)}.bind(this))},this._onComponentsAddedToOverlay=function(e){var t=o.map(e,function(e){return n(e).attr(r)}).filter(function(e){return!o.includes(Object.keys(p),e)});t.length&&this._getComponentsDataByUUIDs(t)},this._onComponentsRemovedFromOverlay=function(e){e.filter(function(e){return!n.find("["+r+"='"+n(e).attr(r)+"']").length}).filter(function(e){return o.includes(Object.keys(p),n(e).attr(r))}).map(function(e){return n(e).attr(r)}).forEach(function(e){delete p[e]})},this._forceAddComponent=function(e){this._resolvePromises({response:[e]})},this._forceRemoveComponent=function(e){delete p[e.uuid]},this._isComponentCached=function(e){return!!p[e]},this._clearCache=function(){p={},m={}},i.subscribe(c,function(e,t){t&&(t.addedComponents&&t.addedComponents.length&&this._onComponentsAddedToOverlay(t.addedComponents),t.removedComponents&&t.removedComponents.length&&this._onComponentsRemovedFromOverlay(t.removedComponents))}.bind(this)),this._onComponentAdded=function(e,t){this._forceAddComponent(t)},this._onComponentRemoved=function(e,t){this._forceRemoveComponent(t)},i.subscribe(l,this._onComponentAdded.bind(this)),i.subscribe(d,this._onComponentAdded.bind(this)),i.subscribe(u,this._onComponentRemoved.bind(this)),i.subscribe(a.PAGE_CHANGE,this._clearCache.bind(this)),i.subscribe(a.USER_HAS_CHANGED,this._clearCache.bind(this))}])},function(e,t){angular.module("componentVisibilityAlertServiceModule",["componentVisibilityAlertServiceInterfaceModule"]).factory("componentVisibilityAlertService",["ComponentVisibilityAlertServiceInterface","extend","gatewayProxy",function(e,t,n){var o=function(){this.gatewayId="ComponentVisibilityAlertService",n.initForService(this,["checkAndAlertOnComponentVisibility"])};return new(o=t(e,o))}])},function(e,t){angular.module("contextualMenuDropdownServiceModule",["contextualMenuDecoratorModule","smarteditServicesModule"]).run(["contextualMenuDropdownService",function(e){e._registerIsOpenEvent()}]).service("contextualMenuDropdownService",["systemEventService","CTX_MENU_DROPDOWN_IS_OPEN","CLOSE_CTX_MENU","DRAG_AND_DROP_EVENTS",function(e,t,n,o){var i;this._registerIsOpenEvent=function(){e.subscribe(t,function(){this._registerDragStarted()}.bind(this))},this._registerDragStarted=function(){i=e.subscribe(o.DRAG_STARTED,this._triggerCloseOperation)},this._triggerCloseOperation=function(){e.publishAsync(n),i&&i()}.bind(this)}])},function(e,t){angular.module("cmsDragAndDropServiceModule",["yjqueryModule","dragAndDropServiceModule","yLoDashModule","legacySmarteditCommonsModule","slotRestrictionsServiceModule","componentEditingFacadeModule","translationServiceModule","removeComponentServiceModule","cmsSmarteditServicesModule","browserServiceModule","seConstantsModule"]).constant("DRAG_AND_DROP_EVENTS",{DRAG_STARTED:"CMS_DRAG_STARTED",DRAG_STOPPED:"CMS_DRAG_STOPPED",DRAG_OVER:"CMS_DRAG_OVER",DRAG_LEAVE:"CMS_DRAG_LEAVE"}).service("cmsDragAndDropService",["$q","$window","$translate","$timeout","yjQuery","lodash","dragAndDropService","componentHandlerService","systemEventService","gatewayFactory","slotRestrictionsService","alertService","assetsService","browserService","componentEditingFacade","waitDialogService","pageContentSlotsComponentsRestService","DRAG_AND_DROP_EVENTS","COMPONENT_REMOVED_EVENT","CONTENT_SLOT_TYPE","OVERLAY_RERENDERED_EVENT","CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS","SMARTEDIT_COMPONENT_PROCESS_STATUS","CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS","domain",function(e,t,n,o,i,s,r,a,c,l,d,u,p,m,h,g,S,v,f,y,_,b,C,I,E){var T=".smartEditComponentX[data-smartedit-component-type='ContentSlot']",O=".smartEditComponentX[data-smartedit-component-type!='ContentSlot']",x="overlayDnd",R="overlayDropzone",A="overlayDropzone--full",P="overlayDropzone--top",N="overlayDropzone--bottom",w="overlayDropzone--left",M="overlayDropzone--right",D="overlayDropzone--hovered",U="smarteditoverlay_dndRendering",V="component_dragged",k="component_dragged_hovered",j="over-slot-enabled",F="over-slot-disabled";this._cachedSlots={},this._highlightedSlot=null,this._highlightedComponent=null,this._highlightedHint=null,this._dragInfo=null,this._overlayRenderedUnSubscribeFn=null,this._componentRemovedUnSubscribeFn=null,this._gateway=l.createGateway("cmsDragAndDrop"),this.register=function(){r.register({id:"se.cms.dragAndDrop",sourceSelector:["#smarteditoverlay .smartEditComponentX[data-smartedit-component-type!='ContentSlot'] .movebutton",".movebutton"],targetSelector:"#smarteditoverlay .smartEditComponentX[data-smartedit-component-type='ContentSlot']",startCallback:this.onStart,dragEnterCallback:this.onDragEnter,dragOverCallback:this.onDragOver,dropCallback:this.onDrop,outCallback:this.onDragLeave,stopCallback:this.onStop,enableScrolling:!0,helper:this._getDragImageSrc})},this.unregister=function(){r.unregister(["se.cms.dragAndDrop"]),d.emptyCache(),this._overlayRenderedUnSubscribeFn&&this._overlayRenderedUnSubscribeFn(),this._componentRemovedUnSubscribeFn&&this._componentRemovedUnSubscribeFn()},this.apply=function(){r.apply("se.cms.dragAndDrop"),this._addUIHelpers(),this._overlayRenderedUnSubscribeFn=c.subscribe(_,this._onOverlayUpdate),this._componentRemovedUnSubscribeFn=c.subscribe(f,this._onOverlayUpdate),this._gateway.subscribe(v.DRAG_STARTED,function(e,t){r.markDragStarted(),this._initializeDragOperation(t)}.bind(this)),this._gateway.subscribe(v.DRAG_STOPPED,function(){r.markDragStopped(),this._cleanDragOperation()}.bind(this))},this.update=function(){r.update("se.cms.dragAndDrop"),this._addUIHelpers(),this._cacheElements()},this._onOverlayUpdate=function(){return this.update(),e.when()}.bind(this),this.onStart=function(e){var t=this._getSelector(e.target);t.attr("data-component-id")||(t=i(t).closest("[data-component-id]"));var n=t.closest(O),o=n.closest(T),s=n.length>0?a.getId(n):t.attr("data-component-id"),r=n.length>0?a.getSlotOperationRelatedUuid(n):t.attr("data-component-uuid"),c=n.length>0?a.getType(n):t.attr("data-component-type"),l=n.length>0?a.getSlotOperationRelatedId(n):t.attr("data-component-id"),d=n.length>0?a.getSlotOperationRelatedType(n):t.attr("data-component-type"),u=n.length>0?a.getId(o):t.attr("data-slot-id"),p={componentId:s,componentUuid:r,componentType:c,slotUuid:n.length>0?a.getId(o):t.attr("data-slot-uuid"),slotId:u,slotOperationRelatedId:l,slotOperationRelatedType:d};n.addClass(V),this._initializeDragOperation(p),this._toggleKeepVisibleComponentAndSlot(!0)}.bind(this),this.onDragEnter=function(e){this._highlightSlot(e)}.bind(this),this.onDragOver=function(e){this._highlightSlot(e).then(function(){if(this._highlightedSlot&&this._highlightedSlot.isAllowed){var t=a.getId(this._highlightedSlot.original);if(!this._highlightedHint||!this._isMouseInRegion(e,this._highlightedHint)){this._highlightedHint&&this._clearHighlightedHint();var n=this._cachedSlots[t];n.components.length>0&&(this._highlightedComponent&&this._isMouseInRegion(e,this._highlightedComponent)||(this._clearHighlightedComponent(),s.forEach(n.components,function(t){if(this._isMouseInRegion(e,t))return this._highlightedComponent=t,!1}.bind(this))),this._highlightedComponent&&s.forEach(this._highlightedComponent.hints,function(t){if(this._isMouseInRegion(e,t))return this._highlightedHint=t,!1}.bind(this))),this._highlightedComponent&&this._highlightedComponent.id===this._dragInfo.slotOperationRelatedId?this._highlightedComponent.original.addClass(k):this._highlightedHint&&this._highlightedHint.original.addClass(D)}}}.bind(this))}.bind(this),this.onDrop=function(e){if(this._highlightedSlot){var t=this._dragInfo.slotId,o=a.getId(this._highlightedSlot.original),i=a.getUuid(this._highlightedSlot.original),s=this._dragInfo.componentId,r=this._dragInfo.slotOperationRelatedId||this._dragInfo.componentId,c=this._dragInfo.slotOperationRelatedType||this._dragInfo.componentType;if(!this._highlightedSlot.isAllowed){var l=n.instant("se.drag.and.drop.not.valid.component.type",{slotUID:o,componentUID:r});return void u.showDanger({message:l})}if(this._highlightedHint||0===this._highlightedSlot.components.length){var d,p=this._highlightedHint?this._highlightedHint.position:0;if(g.showWaitModal(),t)t===o&&this._getComponentPositionFromCachedSlot(t,s)<p&&p--,d=h.moveComponent(t,o,r,p);else if(s){var m={componentId:s,componentUuid:this._dragInfo.componentUuid,componentType:c},S={targetSlotId:o,dragInfo:m,position:p};d=this._dragInfo.cloneOnDrop?h.cloneExistingComponentToSlot(S):h.addExistingComponentToSlot(o,m,p)}else{var v={targetSlotId:o,targetSlotUUId:i},f=a.getCatalogVersionUuid(this._highlightedSlot.original);d=h.addNewComponentToSlot(v,f,c,p)}d.then(function(){this._scrollToModifiedSlot(o)}.bind(this),function(){this.onStop(e)}.bind(this)).finally(function(){g.hideWaitModal()})}}}.bind(this),this._getComponentPositionFromCachedSlot=function(e,t){var n=this._cachedSlots[e],o=(n&&n.components?n.components:[]).find(function(e){return a.getId(e.original)===t});return o?o.position:a.getComponentPositionInSlot(e,t)}.bind(this),this.onDragLeave=function(e){if(this._highlightedSlot){var t=a.getId(this._highlightedSlot.original),n=this._cachedSlots[t];this._isMouseInRegion(e,n)||this._clearHighlightedSlot()}}.bind(this),this.onStop=function(e){var t=this._getSelector(e.target).closest(O);this._toggleKeepVisibleComponentAndSlot(!1),this._cleanDragOperation(t),c.publish(b.RESTART_PROCESS)}.bind(this),this._getDragImageSrc=function(){var e="";return m.isSafari()&&(e=p.getAssetsRoot()+"/images/contextualmenu_move_on.png"),E+e},this._initializeDragOperation=function(e){this._dragInfo=e,this._cacheElements(),a.getOverlay().addClass(U),c.publishAsync(v.DRAG_STARTED)},this._cleanDragOperation=function(e){this._clearHighlightedSlot(),e&&e.removeClass(V),a.getOverlay().removeClass(U),c.publishAsync(v.DRAG_STOPPED),this._dragInfo=null,this._cachedSlots={},this._highlightedSlot=null},this._highlightSlot=function(t){var n,o=i(t.target).closest(T),r=a.getId(o);if(this._highlightedSlot&&(n=a.getId(this._highlightedSlot.original))!==r&&this._clearHighlightedSlot(),!this._highlightedSlot||void 0===this._highlightedSlot.isAllowed){this._highlightedSlot=this._cachedSlots[r];var l=s.cloneDeep(this._dragInfo);return l.componentId=this._dragInfo.slotOperationRelatedId||this._dragInfo.componentId,l.componentType=this._dragInfo.slotOperationRelatedType||this._dragInfo.componentType,l.cloneOnDrop&&delete l.componentId,d.isComponentAllowedInSlot(this._highlightedSlot,l).then(function(e){d.isSlotEditable(r).then(function(i){this._highlightedSlot&&this._highlightedSlot.id===r&&(this._highlightedSlot.isAllowed=e&&i||this._dragInfo.slotId===r,this._highlightedSlot.isAllowed?o.addClass(j):o.addClass(F),"dragenter"!==t.type||n&&n===r||this._highlightedSlot&&this._highlightedSlot.id===r&&(c.publish(r+"_SHOW_SLOT_MENU"),c.publish(v.DRAG_OVER,r)))}.bind(this))}.bind(this))}return e.when()},this._addUIHelpers=function(){var e=a.getOverlay();e.find("."+x).remove(),e.find(T).each(function(){var e=i(this),t=e[0].offsetHeight,n=e[0].offsetWidth,o=a.getId(e);d.getSlotRestrictions(o);var s=e.find(O);if(0===s.length){var r=i("<div></div>");r.addClass(x);var c=i("<div></div>");c.addClass(R),c.addClass(A),r.height(t),r.width(n),r.append(c),e.append(r)}else s.each(function(){var e=i(this),t=e[0].offsetHeight,o=e[0].offsetWidth,s=i("<div></div>");s.addClass(x),s.height(t),s.width(o);var r=i("<div></div>"),a=i("<div></div>");r.addClass(R),a.addClass(R),o===n?(r.addClass(P),a.addClass(N)):(r.addClass(w),a.addClass(M)),s.append(r),s.append(a),e.append(s)})})},this._cacheElements=function(){var e=a.getOverlay();if(e){var t=this,n=this._getWindowScrolling();e.find(T).each(function(){var e=i(this),o=a.getId(e),s=a.getUuid(e);S.getComponentsForSlot(o).then(function(r){var c={id:o,uuid:s,original:e,components:[],rect:t._getElementRects(e,n)},l=e.children(O);if(0===l.length){var d=e.find(".overlayDropzone");c.hint=d.length>0?{original:d,rect:t._getElementRects(d,n)}:null}else l.each(function(e){var o=i(this),s=r.findIndex(function(e){return e.uuid===a.getUuid(o)});-1===s&&(s=e);var l={id:a.getSlotOperationRelatedId(o),type:a.getSlotOperationRelatedType(o),original:o,position:s,hints:[],rect:t._getElementRects(o,n)},d=s++;o.find(".overlayDropzone").each(function(){var e=i(this),o={original:e,position:d++,rect:t._getElementRects(e,n)};l.hints.push(o)}),c.components.push(l)});t._cachedSlots[c.id]=c})})}},this._clearHighlightedHint=function(){this._highlightedHint&&(this._highlightedHint.original.removeClass(D),this._highlightedHint=null)},this._clearHighlightedComponent=function(){this._clearHighlightedHint(),this._highlightedComponent&&(this._highlightedComponent.original.removeClass(k),this._highlightedComponent=null)},this._clearHighlightedSlot=function(){this._clearHighlightedComponent(),this._highlightedSlot&&(this._highlightedSlot.original.removeClass(j),this._highlightedSlot.original.removeClass(F),c.publish("HIDE_SLOT_MENU"),c.publish(v.DRAG_LEAVE)),this._highlightedSlot=null},this._isMouseInRegion=function(e,t){var n=t.rect;return e.pageX>=n.left&&e.pageX<=n.right&&e.pageY>=n.top&&e.pageY<=n.bottom},this._getElementRects=function(e,t){var n=e[0].getBoundingClientRect();return{left:n.left,right:n.right,bottom:n.bottom+t,top:n.top+t}},this._getWindowScrolling=function(){return t.scrollY||t.pageYOffset},this._scrollToModifiedSlot=function(e){var t=a.getComponentInOverlay(e,y);t&&t.length>0&&t[0].scrollIntoView()},this._getSelector=function(e){return i(e)},this._toggleKeepVisibleComponentAndSlot=function(e){if(this._dragInfo){var t=e?I.KEEP_VISIBLE:I.PROCESS;i.each(a.getComponentUnderSlot(this._dragInfo.componentId,this._dragInfo.componentType,this._dragInfo.slotId),function(e,n){n.dataset[C]=t}),i.each(a.getComponent(this._dragInfo.slotId,y),function(e,n){n.dataset[C]=t})}}}])},function(e,t){angular.module("componentEditingFacadeModule",["alertServiceModule","componentServiceModule","componentVisibilityAlertServiceModule","cmsSmarteditServicesModule","renderServiceModule","slotVisibilityServiceModule","translationServiceModule","functionsModule"]).constant("COMPONENT_CREATED_EVENT","COMPONENT_CREATED_EVENT").constant("COMPONENT_UPDATED_EVENT","COMPONENT_UPDATED_EVENT").service("componentEditingFacade",["$log","$q","$translate","copy","ComponentService","systemEventService","crossFrameEventService","pageInfoService","restServiceFactory","editorModalService","renderService","alertService","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","componentVisibilityAlertService","slotVisibilityService","sharedDataService","COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","EVENT_SMARTEDIT_COMPONENT_UPDATED",function(e,t,n,o,i,s,r,a,c,l,d,u,p,m,h,g,S,v,f){var y;function _generateAndAlertErrorMessage(e,t,n,o){n&&n.data&&n.data.errors&&n.data.errors.length>0?u.showDanger({message:"se.cms.draganddrop.error",messagePlaceholders:{sourceComponentId:e,targetSlotId:t,detailedError:n.data.errors[0].message}}):o&&u.showDanger(o)}function _renderSlots(n,o,i,s){return d.renderSlots(n).then(function(){return h.reloadSlotsInfo().then(function(){return s&&function _generateAndAlertSuccessMessage(e,t){u.showSuccess({message:"se.cms.draganddrop.success",messagePlaceholders:{sourceComponentId:e,targetSlotId:t}})}(o,i),t.when()},function(n){return e.error("componentEditingFacadeModule._renderSlots::slotVisibilityService.reloadSlotsInfo"),e.error(n),t.reject(n)})},function(n){return e.error("componentEditingFacadeModule._renderSlots::renderService.renderSlots - targetSlotId:",i),e.error(n),_generateAndAlertErrorMessage(o,i,n),t.reject(n)})}this.addNewComponentToSlot=function(e,t,n,o){var i={smarteditComponentType:n,catalogVersionUuid:t};return l.open(i,e.targetSlotUUId,o).then(function(t){return m.checkAndAlertOnComponentVisibility({itemId:t.uuid,itemType:t.itemtype,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e.targetSlotId,visible:t.visible}),r.publish(S,t),_renderSlots([e.targetSlotId],t.uid,e.targetSlotId,!0)})},this.addExistingComponentToSlot=function(e,n,o){return a.getPageUID().then(function(a){return i.addExistingComponent(a,n.componentId,e,o).then(function(){return i.loadComponentItem(n.componentUuid).then(function(t){return m.checkAndAlertOnComponentVisibility({itemId:n.componentUuid,itemType:n.componentType,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e,visible:t.visible}),s.publish(v,t),r.publish(f,{componentId:n.componentId,componentType:n.componentType,componentUuid:n.componentUuid,requiresReplayingDecorators:!0}),_renderSlots(e,n.componentId,e,!0)},function(o){return _generateAndAlertErrorMessage(n.componentId,e,o),t.reject()})},function(o){return _generateAndAlertErrorMessage(n.componentId,e,o),t.reject()})})},this.cloneExistingComponentToSlot=function(e){return i.loadComponentItem(e.dragInfo.componentUuid).then(function(t){return g.get("experience").then(function(i){var s=o(t);s.componentUuid=s.uuid,s.cloneComponent=!0,s.catalogVersion=i.pageContext.catalogVersionUuid,s.name=n.instant("se.cms.component.name.clone.of.prefix")+" "+s.name,delete s.uuid,delete s.uid,delete s.slots,delete s.restrictions,delete s.creationtime,delete s.modifiedtime;var a={smarteditComponentType:e.dragInfo.componentType,catalogVersionUuid:i.pageContext.catalogVersionUuid,content:o(s),initialDirty:!0};return l.open(a,e.targetSlotId,e.position).then(function(t){return m.checkAndAlertOnComponentVisibility({itemId:t.uuid,itemType:t.itemtype,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e.targetSlotId,visible:t.visible}),r.publish(S,t),_renderSlots(e.targetSlotId,t.uid,e.targetSlotId,!0)})})},function(n){return _generateAndAlertErrorMessage(e.dragInfo.componentId,e.targetSlotId,n),t.reject()})},this.moveComponent=function(e,n,o,i){var s=p+"/pages/:pageId/contentslots/:currentSlotId/components/:componentId";return y=y||c.get(s,"componentId"),a.getPageUID().then(function(s){return y.update({pageId:s,currentSlotId:e,componentId:o,slotId:n,position:i}).then(function(){return _renderSlots([e,n],o,n)},function(e){return _generateAndAlertErrorMessage(o,n,e,{message:"se.cms.draganddrop.move.failed",messagePlaceholders:{slotID:n,componentID:o}}),t.reject()})})}}])},function(e,t){angular.module("slotRestrictionsServiceModule",["yLoDashModule","slotSharedServiceModule","functionsModule","cmsSmarteditServicesModule"]).service("slotRestrictionsService",["$q","$log","lodash","isBlank","yjQuery","gatewayProxy","crossFrameEventService","EVENTS","componentHandlerService","pageInfoService","slotSharedService","restServiceFactory","pageContentSlotsComponentsRestService","typePermissionsRestService","CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI","CONTENT_SLOT_TYPE",function(e,t,n,o,i,s,r,a,c,l,d,u,p,m,h,g){var S,v={},f=null;this.getAllComponentTypesSupportedOnPage=function(){var o=i(c.getAllSlotsSelector()),s=Array.prototype.slice.call(o.map(function(){return c.getId(i(this))}));return e.all(s.map(function(e){return this.getSlotRestrictions(e)}.bind(this))).then(function(e){return n.flatten(e)},function(e){t.info(e)})},this.getSlotRestrictions=function(n){return S=S||u.get(h),this._getPageUID(f).then(function(o){f=o;var i=this._getEntryId(f,n);return v[i]?e.when(v[i]):this._isExternalSlot(n)?(v[i]=[],e.when(v[i])):S.get({pageUid:f,slotUid:n}).then(function(e){return v[i]=e.validComponentTypes,v[i]}.bind(this),function(e){t.info(e)})}.bind(this))},this.isComponentAllowedInSlot=function(e,t){return this.getSlotRestrictions(e.id).then(function(o){return p.getComponentsForSlot(e.id).then(function(i){return(e.id===t.slotId||!i.some(function(e){return e.uid===t.componentId}))&&n.includes(o,t.componentType)})})},this.isSlotEditable=function(e){return m.hasUpdatePermissionForTypes([g]).then(function(t){return d.isSlotShared(e).then(function(n){var o=t[g];if(n){var i=this._isExternalSlot(e);o=o&&!i&&!d.areSharedSlotsDisabled()}return o}.bind(this))}.bind(this))},this.emptyCache=function(){v={},f=null},this._getEntryId=function(e,t){return e+"_"+t},this._isExternalSlot=function(e){return c.isExternalComponent(e,g)},this._getPageUID=function(t){return o(t)?l.getPageUID():e.when(t)},r.subscribe(a.PAGE_CHANGE,function(){this.emptyCache()}.bind(this)),s.initForService(this,["getAllComponentTypesSupportedOnPage","getSlotRestrictions"],"SLOT_RESTRICTIONS")}])},function(e,t){angular.module("editorEnablerServiceModule",["componentVisibilityAlertServiceModule","slotRestrictionsServiceModule","cmsSmarteditServicesModule"]).factory("editorEnablerService",["COMPONENT_UPDATED_EVENT","systemEventService","componentVisibilityAlertService","componentHandlerService","editorModalService","featureService","slotRestrictionsService",function(e,t,n,o,i,s,r){function EditorEnablerService(){this._editButtonCallback=this._editButtonCallback.bind(this)}return EditorEnablerService.prototype._key="se.cms.edit",EditorEnablerService.prototype._nameI18nKey="se.cms.contextmenu.nameI18nKey.edit",EditorEnablerService.prototype._i18nKey="se.cms.contextmenu.title.edit",EditorEnablerService.prototype._descriptionI18nKey="se.cms.contextmenu.descriptionI18n.edit",EditorEnablerService.prototype._editDisplayClass="editbutton",EditorEnablerService.prototype._editDisplayIconClass="sap-icon--edit",EditorEnablerService.prototype._editDisplaySmallIconClass="sap-icon--edit",EditorEnablerService.prototype._editButtonCallback=function(o){var s=o.slotUuid;this.inUse||(this.inUse=!0,i.open(o.componentAttributes).then(function(o){return this.inUse=!1,t.publish(e,o),n.checkAndAlertOnComponentVisibility({itemId:o.uuid,itemType:o.itemtype,catalogVersion:o.catalogVersion,restricted:o.restricted,slotId:s,visible:o.visible})}.bind(this),function(){this.inUse=!1}.bind(this)))},EditorEnablerService.prototype._condition=function(e){var t=o.getParentSlotForComponent(e.element);return r.isSlotEditable(t).then(function(t){return t&&!o.isExternalComponent(e.componentId,e.componentType)})},EditorEnablerService.prototype.enableForComponents=function(e){var t={key:this._key,nameI18nKey:this._nameI18nKey,descriptionI18nKey:this._descriptionI18nKey,priority:400,regexpKeys:e,displayClass:this._editDisplayClass,displayIconClass:this._editDisplayIconClass,displaySmallIconClass:this._editDisplaySmallIconClass,i18nKey:this._i18nKey,condition:this._condition,permissions:["se.context.menu.edit.component"],action:{callback:this._editButtonCallback}};s.addContextualMenuButton(t)},new EditorEnablerService}])},function(e,t){angular.module("pageContentSlotsServiceModule",["resourceModule","smarteditServicesModule","cmsResourceLocationsModule","yLoDashModule"]).service("pageContentSlotsService",["$q","lodash","restServiceFactory","crossFrameEventService","EVENTS","pageInfoService","PAGES_CONTENT_SLOT_RESOURCE_URI",function(e,t,n,o,i,s,r){var a,c=n.get(r);this._reloadPageContentSlots=function(){return s.getPageUID().then(function(n){return a=c.get({pageId:n}).then(function(n){return e.when(t.uniq(n.pageContentSlotList||[]))})})},this.getPageContentSlots=function(){return a?e.when(a):this._reloadPageContentSlots()},this.getSlotStatus=function(n){return(a?e.when(a):this._reloadPageContentSlots()).then(function(e){var o=t.first(e.filter(function(e){return e.slotId===n}));return o?o.slotStatus:void 0})},o.subscribe(i.PAGE_CHANGE,function(){this._reloadPageContentSlots()}.bind(this))}])},function(e,t){angular.module("removeComponentServiceModule",["smarteditServicesModule","renderServiceModule","removeComponentServiceInterfaceModule","experienceInterceptorModule","functionsModule","resourceLocationsModule"]).constant("COMPONENT_REMOVED_EVENT","componentRemovedEvent").factory("removeComponentService",["crossFrameEventService","restServiceFactory","renderService","extend","gatewayProxy","$q","$log","RemoveComponentServiceInterface","experienceInterceptor","systemEventService","componentInfoService","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","COMPONENT_REMOVED_EVENT",function(e,t,n,o,i,s,r,a,c,l,d,u,p){var m=function(e){this.gatewayId=e,i.initForService(this,["removeComponent"])};m=o(a,m);var h=t.get(u+"/contentslots/:slotId/components/:componentId","componentId");return m.prototype.removeComponent=function(e){return h.remove({slotId:e.slotId,componentId:e.slotOperationRelatedId}).then(function(){return d.getById(e.componentUuid)}).then(function(t){return l.publish(p,t),d.getById(e.componentUuid,!0)}).then(function(t){return n.renderSlots(e.slotId),t})},new m("RemoveComponent")}])},function(e,t){angular.module("slotSharedServiceModule",["pageContentSlotsServiceModule","yLoDashModule","cmsSmarteditServicesModule"]).service("slotSharedService",["pageContentSlotsService","lodash","cmsitemsRestService","pageInfoService","$translate","confirmationModalService",function(e,t,n,o,i,s){this.isSlotShared=function(n){return e.getPageContentSlots().then(function(e){var o=t.first(e.filter(function(e){return e.slotId===n}));return o?o.slotShared:void 0})},this.setSharedSlotEnablementStatus=function(e){this.disableShareSlotStatus=e},this.areSharedSlotsDisabled=function(){return this.disableShareSlotStatus},this.convertSharedSlotToNonSharedSlot=function(e,t){return this._validateComponentAttributes(e),this._constructCmsItemParameter(e,t).then(function(e){var o={title:"se.cms.slot.shared.convert.to.unshared.confirmation.title"};return o.description=t?"se.cms.slot.shared.convert.to.unshared.clone.components.confirmation.message":"se.cms.slot.shared.convert.to.unshared.remove.components.confirmation.message",s.confirm(o).then(function(){return n.create(e)})})},this._constructCmsItemParameter=function(e,t){return i("se.cms.slot.shared.clone").then(function(n){return o.getPageUID().then(function(o){return{name:o+"-"+e.smarteditComponentId+"-"+n,smarteditComponentId:e.smarteditComponentId,contentSlotUuid:e.contentSlotUuid,itemtype:e.componentType,catalogVersion:e.catalogVersionUuid,pageUuid:o,cloneComponents:t}})}.bind(this))},this._validateComponentAttributes=function(e){if(!e)throw new Error("Parameter: componentAttributes needs to be supplied!");for(var t=["smarteditComponentId","contentSlotUuid","componentType","catalogVersionUuid"],n=0;n<t.length;n++){var o=t[n];if(!e[o])throw new Error("Parameter: componentAttributes."+o+" needs to be supplied!")}}}])},function(e,t){angular.module("slotSynchronizationServiceModule",[]).constant("SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL","se.cms.synchronization.slots.select.all.components").service("slotSynchronizationService",["SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL","syncPollingService",function(e,t){this.getSyncStatus=function(n,o){return t.getSyncStatus(n).then(function(t){var n=(t.selectedDependencies||[]).concat(t.sharedDependencies||[]).find(function(e){return e.name===o})||{};return n.selectAll=e,n})},this.performSync=function(e,n){return t.performSync(e,n)}}])},function(e,t){angular.module("slotUnsharedServiceModule",["cmsSmarteditServicesModule","pageContentSlotsServiceModule"]).service("slotUnsharedService",["$q","cmsitemsRestService","pageContentSlotsService",function(e,t,n){this.isSlotUnshared=function(e){return n.getSlotStatus(e).then(function(e){return"OVERRIDE"===e})},this.revertToSharedSlot=function(e){return t.delete(e)}}])},function(e,t){angular.module("slotVisibilityServiceModule",["resourceModule","cmsSmarteditServicesModule"]).service("slotVisibilityService",["COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","COMPONENT_REMOVED_EVENT","$log","crossFrameEventService","componentHandlerService","pageInfoService","pageContentSlotsComponentsRestService",function(e,t,n,o,i,s,r,a){var c=function(e){return Object.keys(e).forEach(function(t){var n=[];s.getOriginalComponentsWithinSlot(t).get().forEach(function(e){n.push(s.getId(e))});var o=e[t].filter(function(e){return-1===n.indexOf(e.uid)});e[t]=o}),e};this.reloadSlotsInfo=function(){return r.getPageUID().then(function(e){return a.clearCache(),a.getSlotsToComponentsMapForPageUid(e)}.bind(this),function(e){throw o.error("slotVisibilityService::reloadSlotsInfo - failed call to pageInfoService.getPageUID"),e})};this.getHiddenComponents=function(e){return function(){return r.getPageUID().then(function(e){return a.getSlotsToComponentsMapForPageUid(e)}.bind(this),function(e){throw o.error("slotVisibilityService::_getSlotToComponentsMap - failed call to pageInfoService.getPageUID"),e})}().then(c).then(function(t){return t[e]||[]},function(){return[]})},this._clearComponentsCache=function(){a.clearCache()},i.subscribe(e,this._clearComponentsCache),i.subscribe(t,this._clearComponentsCache),i.subscribe(n,this._clearComponentsCache)}])},function(e,t){angular.module("cmssmarteditTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmssmartedit/components/externalComponent/externalComponentButtonTemplate.html",'<div class="se-ctx-menu-btn__msg"\n    data-ng-if="ctrl.isReady">\n    {{ctrl.catalogVersion}}\n</div>'),e.put("web/features/cmssmartedit/components/externalComponent/externalComponentDecoratorTemplate.html",'<div data-ng-class="{\n    \'cms-external-component-decorator\': !ctrl.isExtenalSlot, \n    \'disabled-shared-slot-hovered\': ctrl.active && !ctrl.isExtenalSlot, \n    \'cms-external-component-decorator--versioning\': ctrl.isVersioningPerspective}">\n    <div class="se-ctx-menu__overlay"\n        data-ng-if="!ctrl.isExtenalSlot && ctrl.isReady">\n        <span data-ng-if="!ctrl.active || ctrl.isVersioningPerspective"\n            data-y-popover\n            data-placement="\'bottom\'"\n            data-template="ctrl.getTooltipTemplate()"\n            data-trigger="\'hover\'"\n            class="sap-icon--globe se-ctx-menu-element__btn"\n            data-ng-class="{\'sap-icon--globe--version\': ctrl.isVersioningPerspective}"></span>\n    </div>\n    <div class="se-wrapper-data"\n        data-ng-class="{\'disabled-shared-slot-versioning-mode\': ctrl.isVersioningPerspective && !ctrl.isExtenalSlot}"\n        data-ng-transclude>\n    </div>\n</div>'),e.put("web/features/cmssmartedit/components/sharedComponent/sharedComponentButtonTemplate.html",'<div class="se-ctx-menu-btn__msg">\n    <div class="se-ctx-menu-btn__msg-title"\n        data-translate="se.cms.contextmenu.shared.component.info.title"></div>\n    <div data-ng-if="$ctrl.isReady"\n        class="se-ctx-menu-btn__msg-description">\n        {{ $ctrl.message | translate }}\n    </div>\n    <div data-ng-if="!$ctrl.isReady">\n        <div class="spinner-sm spinner-light"></div>\n    </div>\n</div>'),e.put("web/features/cmssmartedit/components/slotShared/slotSharedButtonTemplate.html",'<div class="se-shared-slot-button-template"\n    data-ng-if="ctrl.slotSharedFlag">\n    <div class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened">\n        <button type="button"\n            data-uib-dropdown-toggle\n            class="se-slot-ctx-menu__dropdown-toggle sap-icon--chain-link se-slot-ctx-menu__dropdown-toggle-icon"\n            data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isPopupOpened}"\n            id="sharedSlotButton-{{::ctrl.slotId}}">\n        </button>\n        <div class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu"\n            data-uib-dropdown-menu>\n            <div class="se-slot-contextual-menu__header"\n                data-translate="se.sharedslot.decorator.label">\n            </div>\n\n            <div class="se-shared-slot__body">\n                <div class="se-shared-slot__description"\n                    data-translate="se.cms.slot.shared.popover.message"></div>\n\n                <div has-operation-permission="\'se.shared.slot.override.options\'">\n                    <div class="se-shared-slot__sub-header"\n                        data-translate="se.cms.slot.shared.popover.convertoptions.title"></div>\n\n                    <div class="se-shared-slot__option">\n                        <a class="se-shared-slot__link fd-link"\n                            data-ng-click="ctrl.convertToNonSharedSlotAndCloneComponents()"\n                            data-translate="se.cms.slot.shared.popover.button.clonecomponents">\n                        </a>\n                        <div class="se-shared-slot__link-description"\n                            data-translate="se.cms.slot.shared.popover.text.clonecomponents"></div>\n                    </div>\n                    <div class="se-shared-slot__option">\n                        <a class="se-shared-slot__link fd-link"\n                            data-ng-click="ctrl.convertToNonSharedSlotAndRemoveComponents()"\n                            data-translate="se.cms.slot.shared.popover.button.removecomponents">\n                        </a>\n                        <div class="se-shared-slot__link-description"\n                            data-translate="se.cms.slot.shared.popover.text.removecomponents"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmartedit/components/slotShared/slotSharedTemplate.html",'<slot-shared-button data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-component-attributes="ctrl.componentAttributes"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)">\n</slot-shared-button>'),e.put("web/features/cmssmartedit/components/slotSharedDisabled/externalSlotDisabledDecoratorTemplate.html",'<div class="se-decorator-wrap">\n    <slot-disabled-component data-active="ctrl.active"\n        data-component-attributes="ctrl.componentAttributes" />\n    <div ng-transclude></div>\n</div>'),e.put("web/features/cmssmartedit/components/slotSharedDisabled/sharedSlotDisabledDecoratorTemplate.html",'<div class="se-decorator-wrap">\n    <slot-disabled-component data-active="ctrl.active"\n        data-component-attributes="ctrl.componentAttributes" />\n    <div ng-transclude></div>\n</div>'),e.put("web/features/cmssmartedit/components/slotSharedDisabled/slotDisabledTemplate.html",'<div class="disabled-shared-slot se-slot-popover external-shared-slot"\n    data-ng-class="{ \'disabled-shared-slot-hovered\': ctrl.active, \'external-shared-slot\': ctrl.isExternalSlot, \'disabled-shared-slot-versioning-mode\': ctrl.isVersioningPerspective, \'disabled-shared-slot\': !ctrl.isVersioningPerspective}"\n    data-popover-content="{{ctrl.getPopoverMessage()}}">\n    <div class="se-slot-popover__arrow">\n        <div class="se-slot-popover__arrow--fill"></div>\n    </div>\n    <div class="disabled-shared-slot__icon--outer disabled-shared-slot__icon--outer-linked"\n        data-ng-class="[ctrl.getOuterSlotClass(), { \'disabled-shared-slot__icon--outer-hovered\': ctrl.active && !ctrl.isVersioningPerspective}]">\n        <span class="hyicon shared_slot_disabled_icon disabled-shared-slot__icon--inner"\n            data-ng-class="ctrl.getSlotIconClass()">\n        </span>\n    </div>\n</div>'),e.put("web/features/cmssmartedit/components/slotUnshared/slotUnsharedButtonTemplate.html",'<div class="slot-unshared-button-template"\n    data-ng-if="ctrl.slotUnsharedFlag">\n    <div class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened">\n        <button type="button"\n            data-uib-dropdown-toggle\n            class="se-slot-ctx-menu__dropdown-toggle sap-icon--broken-link se-slot-ctx-menu__dropdown-toggle-icon"\n            data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isPopupOpened}"\n            id="slot-unshared-button-{{::ctrl.slotUid}}">\n        </button>\n        <div class="dropdown-menu dropdown-menu-right se-toolbar-menu-content se-slot__dropdown-menu"\n            data-uib-dropdown-menu>\n            <div class="se-slot-contextual-menu__header"\n                data-translate="se.cms.unshared.slot.header">\n            </div>\n            <div class="shared-slot__divider"></div>\n            <div class="se-shared-slot__body">\n                <div class="se-shared-slot__link-description se-shared-slot__link-description__unshared"\n                    data-translate="se.cms.slot.unshared.popover.message"></div>\n                <div data-has-operation-permission="\'se.revert.to.shared.slot.link\'">\n                    <a class="se-shared-slot__link fd-link"\n                        data-ng-click="ctrl.revertToSharedSlot()"\n                        data-translate="se.cms.slot.unshared.revert.to.shared.title">\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmartedit/components/slotUnshared/slotUnsharedButtonWrapperTemplate.html",'<slot-unshared-button data-slot-uuid="{{::ctrl.componentAttributes.smarteditComponentUuid}}"\n    data-slot-uid="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"></slot-unshared-button>'),e.put("web/features/cmssmartedit/components/slotVisibility/hiddenComponentMenu/hiddenComponentMenuItemsTemplate.html",'<div class="se-hidden-component-menu fd-menu__list">\n    <div class="se-hidden-component-menu__item fd-menu__item"\n        data-ng-repeat="dropdownItem in ctrl.menuItems"\n        data-ng-click="ctrl.executeItemCallback(dropdownItem, $event)">\n        <span class="se-hidden-component-menu__item-icon"\n            data-ng-class="[dropdownItem.displayIconClass]"></span>\n        <span class="se-hidden-component-menu__item-link">\n            {{ dropdownItem.i18nKey | translate }}\n        </span>\n    </div>\n</div>'),e.put("web/features/cmssmartedit/components/slotVisibility/hiddenComponentMenu/hiddenComponentMenuTemplate.html",'<div class="se-hidden-component-menu__popup-anchor"\n    data-ng-click="ctrl.onButtonClick($event)"\n    y-popup-overlay="ctrl.popupConfig"\n    y-popup-overlay-trigger="{{ctrl.isMenuOpen}}"\n    y-popup-overlay-on-hide="ctrl.onMenuHide()">\n    <span data-ng-if="ctrl.menuItems.length > 0"\n        class="sap-icon--overflow se-hidden-component-menu__toggle"></span>\n</div>'),e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityButtonTemplate.html",'<div class="se-slot-ctx-menu__dropdown-toggle-wrapper \n        se-slot-ctx-menu__dropdown-toggle-wrapper--slot-visibility \n        se-slot-ctx-menu__divider"\n    data-uib-dropdown\n    data-dropdown-append-to="\'#smarteditoverlay\'"\n    data-ng-if="ctrl.buttonVisible"\n    data-is-open="ctrl.isComponentListOpened">\n\n    <button type="button"\n        data-uib-dropdown-toggle\n        class="se-slot-ctx-menu__dropdown-toggle--slot-visibility se-slot-ctx-menu__dropdown-toggle"\n        data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isComponentListOpened}"\n        id="slot-visibility-button-{{::ctrl.slotId}}">\n        <span class="se-slot-ctx-menu__dropdown-toggle-icon sap-icon--hide"></span>\n        <span class="se-slot-ctx-menu__dropdown-toggle-add-on">{{ ::ctrl.hiddenComponentCount }}</span>\n    </button>\n\n    <div class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu"\n        data-uib-dropdown-menu\n        data-ng-click="ctrl.onInsideClick($event)"\n        role="menu"\n        id="slot-visibility-list-{{::ctrl.slotId}}">\n\n        <div class="se-slot-contextual-menu__header"\n            data-translate="se.cms.slotvisibility.list.title"></div>\n\n        <ul class="se-slot-visility__component-list">\n            <li data-ng-repeat="component in ctrl.hiddenComponents track by $index"\n                class="se-slot-visility__component-list-item">\n                <span data-y-popover\n                    data-ng-if="component.isExternal"\n                    data-trigger="\'hover\'"\n                    data-template="ctrl.getTemplateInfoForExternalComponent()">\n                    <slot-visibility-component data-component="component"\n                        data-component-id="{{::component.uid}}"\n                        data-slot-id="{{::ctrl.slotId}}"></slot-visibility-component>\n                </span>\n                <slot-visibility-component data-component="component"\n                    data-ng-if="!component.isExternal"\n                    data-component-id="{{::component.uid}}"\n                    data-slot-id="{{::ctrl.slotId}}"></slot-visibility-component>\n            </li>\n        </ul>\n    </div>\n</div>'),e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityComponentTemplate.html",'<div class="se-slot-visibility-wrapper"\n    data-ng-class="{\'se-slot-visibility-wrapper__external\': ctrl.readOnly}">\n    <div class="se-slot-visiblity-component__content"\n        data-ng-if="ctrl.isReady">\n        <div class="se-slot-visibility__icon-wrapper">\n            <div class="se-slot-visibility__icon sap-icon--home-share"></div>\n            <div data-ng-if="ctrl.isSharedComponent"\n                class="se-slot-visibility__icon--shared sap-icon--chain-link">\n            </div>\n        </div>\n\n        <div class="se-slot-visiblity-component__description">\n            <div data-ng-if="ctrl.readOnly"\n                class="se-slot-visiblity-component__name">\n                {{ ::ctrl.component.name }}</div>\n            <div data-ng-if="!ctrl.readOnly"\n                class="se-slot-visiblity-component__name--link"\n                data-ng-click="ctrl.openEditorModal()">{{ ::ctrl.component.name }}</div>\n            <div class="se-slot-visiblity-component__type">\n                {{ ::ctrl.component.typeCode }}</div>\n            <div class="se-slot-visiblity-component__visibility">\n                {{\'se.genericeditor.tab.visibility.title\' | translate}} {{ctrl.componentVisibilitySwitch | translate}} / {{ctrl.componentRestrictionsCount}} {{\'se.cms.restrictions.editor.tab\' | translate}}</div>\n            <div data-ng-if="ctrl.component.isExternal === true"\n                class="sap-icon--globe slot-visiblity-component--globe-icon"></div>\n        </div>\n    </div>\n    <hidden-component-menu class="slot-visiblity-component--hidden-menu"\n        data-slot-id="ctrl.slotId"\n        data-component="ctrl.component"></hidden-component-menu>\n</div>'),e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityWidgetTemplate.html",'<slot-visibility-button data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)" />'),e.put("web/features/cmssmartedit/components/synchronize/slots/slotSyncButtonTemplate.html",'<div class="se-slot-sync-button-template"\n    data-ng-if="ctrl.ready">\n    <div class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened">\n\n        <span data-y-popover\n            class="se-slot-ctx-menu__popover-ancor"\n            data-trigger="\'hover\'"\n            data-template="ctrl.newPageIsNotSynchronizedTemplate"\n            data-ng-if="ctrl.newPageIsNotSynchronized"\n            data-placement="\'bottom\'">\n        </span>\n\n        <button type="button"\n            data-uib-dropdown-toggle\n            class="se-slot-ctx-menu__dropdown-toggle"\n            data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isPopupOpened, \n                \'se-slot-ctx-menu__dropdown-toggle--disabled\': ctrl.newPageIsNotSynchronized }"\n            id="slot-sync-button-{{::ctrl.slotId}}">\n            <span class="sap-icon--synchronize se-slot-ctx-menu__dropdown-toggle-icon"></span>\n            <span data-ng-if="!ctrl.isSlotInSync"\n                class="sap-icon--alert se-slot-sync__btn-status se-slot-ctx-menu__dropdown-toggle-add-on"></span>\n        </button>\n        <div class="se-slot__dropdown-menu dropdown-menu-right"\n            data-uib-dropdown-menu\n            role="menu">\n            <div class="se-toolbar-menu-content--wrapper">\n                <div class="se-slot-contextual-menu__header"\n                    data-translate="se.cms.synchronization.slot.header">\n                </div>\n                <div class="se-slot-sync__body">\n                    <slot-synchronization-panel data-ng-if="ctrl.isPopupOpened"\n                        data-slot-id="ctrl.slotId"></slot-synchronization-panel>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmartedit/components/synchronize/slots/slotSynchronizationPanelTemplate.html",'<div data-page-sensitive>\n    <synchronization-panel data-item-id="$ctrl.slotId"\n        data-get-sync-status="$ctrl.getSyncStatus"\n        data-perform-sync="$ctrl.performSync"\n        data-get-api="$ctrl.getApi($api)">\n    </synchronization-panel>\n</div>'),e.put("web/features/cmssmartedit/components/synchronize/slots/slotSyncTemplate.html",'<slot-sync-button data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"></slot-sync-button>'),e.put("web/features/cmssmartedit/components/synchronize/slots/SyncIndicatorDecoratorTemplate.html",'<div class="sync-indicator-decorator"\n    [ngClass]="syncStatus.status"\n    [attr.sync-status]="syncStatus.status">\n    <ng-content class="se-wrapper-data"></ng-content>\n</div>')}])},function(e,t,n){var o={"./components/synchronize/synchronizationPanel.js":59,"./dao/resource.js":60,"./dao/resourceLocations.js":61,"./services/componentService.js":62,"./services/componentVisibilityAlertServiceInterface.js":63,"./services/removeComponentServiceInterface.js":64,"./services/synchronizationService.js":65,"./templates.js":66};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=58},function(e,t){angular.module("synchronizationPanelModule",["yHelpModule","translationServiceModule","alertServiceModule","timerModule","alertsBoxModule","yMessageModule","smarteditServicesModule","l10nModule"]).controller("SynchronizationPanelController",["$log","$q","$attrs","$translate","isBlank","EVENT_CONTENT_CATALOG_UPDATE","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","alertService","systemEventService","timerService","crossFrameEventService","catalogService","l10nFilter","sharedDataService","waitDialogService",function(e,t,n,o,i,s,r,a,c,l,d,u,p,m,h,g){this.syncPendingItems=[],this.selectedItems=[],this.message=null,this.showItemList=!0,this.disableList=!1,this.isLoading=!1,this.refreshInterval=r.SLOW_POLLING_TIME,this.getRows=function(){return this.syncStatus?[this.syncStatus].concat(this.syncStatus.selectedDependencies):[]},this.api={selectAll:function(){if(!this.syncStatus)throw new Error("Synchronization status is not available. The 'selectAll' function should be used with 'onSyncStatusReady' event.");this.syncStatus.selected=!0,this.selectionChange(0)}.bind(this),displayItemList:function(e){this.showItemList=e}.bind(this),disableItemList:function(e){this.disableList=e}.bind(this),setMessage:function(e){this.message=e}.bind(this),disableItem:null},this.selectionChange=function(e){this.syncStatus.selectedDependencies.forEach(function(t){t.selected=0===e&&t.status!==a.IN_SYNC&&!t.isExternal||t.selected}.bind(this)),this.selectedItems=this.getRows().filter(function(e){return e.selected}),this.onSelectedItemsUpdate&&this.onSelectedItemsUpdate(this.selectedItems)},this.preserveSelection=function(e){var t=(e||[]).map(function(e){return e.itemId},[]);this.getRows().forEach(function(e){e.selected=t.indexOf(e.itemId)>-1&&e.status!==a.IN_SYNC})},this.isDisabled=function(e){return!!(this.disableList||this.api.disableItem&&this.api.disableItem(e))||(e!==this.syncStatus&&this.syncStatus.selected||e.status===a.IN_SYNC)}.bind(this),this.isSyncButtonDisabled=function(){return this.disableList||0===this.selectedItems.length||0!==this.syncPendingItems.length},this.isInSync=function(e){return e.status===a.IN_SYNC},this.isOutOfSync=function(e){return e.status===a.NOT_IN_SYNC},this.isInProgress=function(e){return e.status===a.IN_PROGRESS},this.isSyncFailed=function(e){return e.status===a.SYNC_FAILED},this.hasHelp=function(e){return e.dependentItemTypesOutOfSync&&e.dependentItemTypesOutOfSync.length>0},this.buildInfoTemplate=function(e){if(e&&e.dependentItemTypesOutOfSync&&!e.isExternal){var t=e.dependentItemTypesOutOfSync.reduce(function(e,t){return e+="<div>"+o.instant(t.i18nKey)+"</div>"},"");return t?"<div>"+t+"</div>":""}if(e.isExternal)return e.catalogVersionNameTemplate},this.fetchSyncStatus=function(e,t){if(!t||t.itemId===this.itemId)return this.isLoading=!0,this.getSyncStatus(this.itemId).then(function(e){h.get("experience").then(function(t){var n=e.catalogVersionUuid;this.syncStatus=e,this.preserveSelection(this.selectedItems),this.selectionChange(),this._updateStatus(),this.markExternalComponents(n,this.getRows()),this.setTemplateExternalCatalogVersionName(t,this.getRows()),0===this.syncPendingItems.length&&(this.refreshInterval=r.SLOW_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),l.publishAsync(r.SLOW_DOWN,this.itemId)),"function"==typeof this.onSyncStatusReady&&this.onSyncStatusReady({$syncStatus:e})}.bind(this))}.bind(this)).finally(function(){this.isLoading=!1}.bind(this))},this.markExternalComponents=function(e,t){t.forEach(function(t){t.isExternal=t.catalogVersionUuid!==e})},this.getInfoTitle=function(e){if(!e.isExternal)return"se.cms.synchronization.panel.update.title"},this.getTemplateInfoForExternalComponent=function(){return"<div>"+o.instant("se.cms.synchronization.slot.external.component")+"</div>"},this.setTemplateExternalCatalogVersionName=function(e,t){t.forEach(function(t){t.catalogVersionNameTemplate="<span></span>",p.getCatalogVersionByUuid(t.catalogVersionUuid,e.siteDescriptor.uid).then(function(e){t.catalogVersionNameTemplate="<div>"+m(e.catalogName)+"</div>"})})},this._updateStatus=function(){var e=!1,t="",n=this.syncPendingItems.length;this.getRows().forEach(function(o){this.syncPendingItems.indexOf(o.itemId)>-1&&o.status===a.SYNC_FAILED&&(t=" "+t+o.itemId,e=!0),this.syncPendingItems.indexOf(o.itemId)>-1&&o.status!==a.IN_PROGRESS&&this.syncPendingItems.splice(this.syncPendingItems.indexOf(o.itemId),1);var i=n&&0===this.syncPendingItems.length;(i||0===n)&&(i&&(l.publishAsync(s),n=0),g.hideWaitModal()),o.status===a.IN_PROGRESS&&-1===this.syncPendingItems.indexOf(o.itemId)&&this.syncPendingItems.push(o.itemId)}.bind(this)),e&&c.showDanger({message:o.instant("se.cms.synchronization.panel.failure.message",{items:t})})},this.$onInit=function(){this.syncItems=function(){var n=this.getRows().filter(function(e){return e.selected}).map(function(e){return{itemId:e.itemId,itemType:e.itemType}});return Array.prototype.push.apply(this.syncPendingItems,n.map(function(e){return e.itemId})),this.selectedItems.length?(g.showWaitModal("se.sync.synchronizing"),this.performSync(n).then(function(){this.refreshInterval=r.FAST_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),l.publishAsync(r.SPEED_UP,this.itemId)}.bind(this),function(){e.warn("[synchronizationPanel] - Could not perform synchronization."),g.hideWaitModal()})):t.when()}.bind(this),"function"==typeof this.getApi&&this.getApi({$api:this.api}),this.unsubscribeFastFetch=u.subscribe(r.FAST_FETCH,this.fetchSyncStatus.bind(this)),this.fetchSyncStatus(),this.resynchTimer=d.createTimer(this.fetchSyncStatus.bind(this),this.refreshInterval),this.resynchTimer.start()},this.$onDestroy=function(){this.resynchTimer.teardown(),this.unsubscribeFastFetch(),l.publishAsync(r.SLOW_DOWN,this.itemId)},this.$postLink=function(){this.showSyncButton=i(n.syncItems)}}]).component("synchronizationPanel",{templateUrl:"synchronizationPanelTemplate.html",controller:"SynchronizationPanelController",controllerAs:"sync",bindings:{itemId:"<",getSyncStatus:"<",performSync:"<",headerTemplateUrl:"<?",syncItems:"=?",onSelectedItemsUpdate:"<?",onSyncStatusReady:"&?",getApi:"&?"}})},function(e,t){angular.module("resourceModule",["smarteditServicesModule","resourceLocationsModule","cmsResourceLocationsModule","functionsModule"]).factory("itemsResource",["restServiceFactory","ITEMS_RESOURCE_URI","URIBuilder",function(e,t,n){return{getItemResource:function(){return e.get(t)},getItemResourceByContext:function(o){return e.get(new n(t).replaceParams(o).build())}}}]).factory("pagesContentSlotsComponentsResource",["restServiceFactory","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("navigationNodeRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("synchronizationResource",["restServiceFactory","URIBuilder","GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","POST_PAGE_SYNCHRONIZATION_RESOURCE_URI",function(e,t,n,o){return{getPageSynchronizationGetRestService:function(o){var i=new t(n).replaceParams(o).build();return e.get(i)},getPageSynchronizationPostRestService:function(n){var i=new t(o).replaceParams(n).build();return e.get(i)}}}])},function(e,t){!function(){var e="CURRENT_CONTEXT_CATALOG",t="CURRENT_CONTEXT_CATALOG_VERSION",n="CURRENT_CONTEXT_SITE_ID",o="CURRENT_PAGE_CONTEXT_CATALOG";angular.module("cmsResourceLocationsModule",[]).constant("CONTEXT_SITE_ID",n).constant("CONTEXT_CATALOG",e).constant("CONTEXT_CATALOG_VERSION",t).constant("PAGE_CONTEXT_SITE_ID","CURRENT_PAGE_CONTEXT_SITE_ID").constant("PAGE_CONTEXT_CATALOG",o).constant("PAGE_CONTEXT_CATALOG_VERSION","CURRENT_PAGE_CONTEXT_CATALOG_VERSION").constant("TYPES_RESOURCE_URI","/cmswebservices/v1/types").constant("ITEMS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/items").constant("PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslotscomponents").constant("CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI","/cmswebservices/v1/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pages/:pageUid/contentslots/:slotUid/typerestrictions").constant("PAGES_LIST_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pages").constant("PAGE_LIST_PATH","/pages/:siteId/:catalogId/:catalogVersion").constant("TRASHED_PAGE_LIST_PATH","/trashedpages/:siteId/:catalogId/:catalogVersion").constant("PAGES_CONTENT_SLOT_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslots").constant("PAGE_TEMPLATES_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/pagetemplates").constant("NAVIGATION_MANAGEMENT_PAGE_PATH","/navigations/:siteId/:catalogId/:catalogVersion").constant("NAVIGATION_MANAGEMENT_RESOURCE_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/navigations").constant("NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/navigations/:navigationUid/entries").constant("NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI","/cmswebservices/v1/navigationentrytypes").constant("CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagesrestrictions").constant("PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pagesrestrictions").constant("RESTRICTION_TYPES_URI","/cmswebservices/v1/restrictiontypes").constant("PAGE_TYPES_RESTRICTION_TYPES_URI","/cmswebservices/v1/pagetypesrestrictiontypes").constant("PAGE_TYPES_URI","/cmswebservices/v1/pagetypes").constant("GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+o+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/synchronizations/versions/:target/pages/:pageUid").constant("POST_PAGE_SYNCHRONIZATION_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/synchronizations/versions/:target")}()},function(e,t){angular.module("componentServiceModule",["smarteditServicesModule","cmsSmarteditServicesModule","resourceLocationsModule","slotRestrictionsServiceModule"]).service("ComponentService",["$q","restServiceFactory","TYPES_RESOURCE_URI","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","cmsitemsRestService","catalogService","slotRestrictionsService","pageInfoService","pageContentSlotsComponentsRestService","typePermissionsRestService",function(e,t,n,o,i,s,r,a,c,l,d,u){var p=t.get(n),m=r,h=t.get(o);this.createNewComponent=function(e,t){var n={};if(n.name=e.name,n.slotId=e.targetSlotId,n.pageId=e.pageId,n.position=e.position,n.typeCode=e.componentType,n.itemtype=e.componentType,n.catalogVersion=e.catalogVersionUuid,"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);else if(t)throw"ComponentService.createNewComponent() - Illegal componentPayload - ["+t+"]";return m.create(n)},this.updateComponent=function(e){return m.update(e)},this.addExistingComponent=function(e,t,n,o){var i={};return i.pageId=e,i.slotId=n,i.componentId=t,i.position=o,h.save(i)},this.loadComponentTypes=function(){return p.get({category:"COMPONENT"})},this.getSupportedComponentTypesForCurrentPage=function(){return e.all([this.loadComponentTypes(),c.getAllComponentTypesSupportedOnPage()]).then(function(e){var t=e[1],n=e[0].componentTypes.filter(function(e){return t.indexOf(e.code)>-1}),o=n.map(function(e){return e.code});return u.hasCreatePermissionForTypes(o).then(function(e){return n.filter(function(t){return e[t.code]})})}.bind(this))}.bind(this),this.loadComponentItem=function(e){return m.getById(e)},this.loadPagedComponentItems=function(e,t,n){return a.retrieveUriContext().then(function(o){var r={pageSize:t,currentPage:n,mask:e,sort:"name",typeCode:"AbstractCMSComponent",catalogId:o[i],catalogVersion:o[s]};return m.get(r)})},this.loadPagedComponentItemsByCatalogVersion=function(e){var t={pageSize:e.pageSize,currentPage:e.page,mask:e.mask,sort:"name",typeCode:"AbstractCMSComponent",catalogId:e.catalogId,catalogVersion:e.catalogVersion};return m.get(t)},this.getSlotsForComponent=function(e){var t=[];return this._getContentSlotsForComponents().then(function(n){return Object.keys(n).forEach(function(o){n[o].find(function(t){return t.uuid===e})&&t.push(o)}),t}.bind(this))},this._getContentSlotsForComponents=function(){return l.getPageUID().then(function(e){return d.getSlotsToComponentsMapForPageUid(e)})}}])},function(e,t){angular.module("componentVisibilityAlertServiceInterfaceModule",[]).factory("ComponentVisibilityAlertServiceInterface",function(){var e=function(){};return e.prototype.checkAndAlertOnComponentVisibility=function(){},e})},function(e,t){angular.module("removeComponentServiceInterfaceModule",[]).factory("RemoveComponentServiceInterface",function(){function RemoveComponentServiceInterface(){}return RemoveComponentServiceInterface.prototype.removeComponent=function(){},RemoveComponentServiceInterface})},function(e,t){angular.module("synchronizationServiceModule",["smarteditServicesModule","resourceLocationsModule","alertServiceModule","timerModule","legacySmarteditCommonsModule","cmsConstantsModule"]).constant("CATALOG_SYNC_INTERVAL_IN_MILLISECONDS",5e3).service("synchronizationService",["restServiceFactory","timerService","$q","$translate","alertService","authenticationService","operationContextService","crossFrameEventService","OPERATION_CONTEXT","CATALOG_SYNC_INTERVAL_IN_MILLISECONDS","SYNCHRONIZATION_EVENT",function(e,t,n,o,i,s,r,a,c,l,d){var u={},p=[],m=e.get("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target"),h=e.get("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target","catalog");r.register("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target",c.CMS),r.register("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target",c.CMS),this.updateCatalogSync=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);return this.addCatalogSyncRequest(t),h.update({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion}).then(function(e){return e}.bind(this),function(t){var n=o.instant("sync.running.error.msg",{catalogName:e.name});return"Conflict"===t.statusText&&i.showDanger({message:n}),!1}.bind(this))},this.getCatalogSyncStatus=function(e){return e.sourceCatalogVersion?this.getSyncJobInfoBySourceAndTarget(e):this.getLastSyncJobInfoByTarget(e)},this.getSyncJobInfoBySourceAndTarget=function(e){return h.get({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})},this.getLastSyncJobInfoByTarget=function(e){return m.get({catalog:e.catalogId,target:e.targetCatalogVersion})},this.startAutoGetSyncData=function(e,n){var o=e.catalogId,i=e.sourceCatalogVersion,s=e.targetCatalogVersion,r=this._getJobKey(o,i,s),a=t.createTimer(this._autoSyncCallback.bind(this,e,n,r),l);a.start(),u[r]=a},this._autoSyncCallback=function(e,t,n){s.isAuthenticated("/cmswebservices").then(function(o){o||this.stopAutoGetSyncData(e),this.getCatalogSyncStatus(e).then(this.syncRequestedCallback(e)).then(t).then(function(){u[n]||this.startAutoGetSyncData(e,t)}.bind(this))}.bind(this))},this.syncRequestedCallback=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);return function(n){return this.catalogSyncInProgress(t)&&(this.catalogSyncFinished(n)&&(this.removeCatalogSyncRequest(t),a.publish(d.CATALOG_SYNCHRONIZED,e)),(u[t].discardWhenNextSynced&&this.catalogSyncFinished(n)||this.catalogSyncAborted(n))&&(u[t].stop(),u[t]=void 0,this.removeCatalogSyncRequest(t))),n}.bind(this)},this.catalogSyncInProgress=function(e){return p.indexOf(e)>-1},this.catalogSyncFinished=function(e){return"FINISHED"===e.syncStatus},this.catalogSyncAborted=function(e){return"ABORTED"===e.syncStatus},this.removeCatalogSyncRequest=function(e){var t=p.indexOf(e);t>-1&&p.splice(t,1)},this.addCatalogSyncRequest=function(e){-1===p.indexOf(e)&&p.push(e)},this.stopAutoGetSyncData=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);u[t]&&(p.indexOf(t)>-1?u[t].discardWhenNextSynced=!0:(u[t].stop(),u[t]=void 0))},this._getJobKey=function(e,t,n){return e+"_"+t+"_"+n}}])},function(e,t){angular.module("cmscommonsTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmscommons/components/synchronize/synchronizationPanelTemplate.html",'<div class="se-sync-panel">\n    <div class="se-sync-panel__sync-status"\n        data-ng-if="sync.headerTemplateUrl"\n        data-ng-include="sync.headerTemplateUrl">\n    </div>\n\n    <y-message data-ng-if="sync.message"\n        data-type="{{sync.message.type}}"\n        data-message-id="sync-panel-message-{{$index}}">\n        <message-description>\n            {{sync.message.description}}\n        </message-description>\n    </y-message>\n\n    <div class="se-sync-panel__sync-info"\n        data-ng-show="sync.showItemList">\n        <div data-ng-if="sync.isLoading">\n            <div class="spinner-sm spinner-light">Loading...</div>\n        </div>\n        <div data-ng-if="!sync.isLoading"\n            data-ng-repeat="dependency in sync.getRows()"\n            data-ng-class="{active: $index==0, \'se-sync-panel--item__external\': dependency.isExternal}"\n            class="se-sync-panel__sync-info__row">\n\n            <div class="se-sync-panel__info-checkbox fd-form__item">\n                <input type="checkbox"\n                    class="fd-form__control"\n                    data-ng-if="!dependency.isExternal"\n                    data-ng-model="dependency.selected"\n                    data-ng-disabled="sync.isDisabled(dependency)"\n                    data-ng-change="sync.selectionChange($index)"\n                    id="sync-info__checkbox_{{$index}}">\n                <label data-ng-if="$index===0"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__info-checkbox-label se-sync-panel__info-checkbox-label--select-all fd-form__label"\n                    title="{{::dependency.selectAll | translate}}">\n                    {{::dependency.selectAll | translate}}</label>\n\n                <label data-ng-if="$index!==0 && !dependency.isExternal"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__info-checkbox-label fd-form__label"\n                    title="{{::dependency.name | translate}}">\n                    {{::dependency.name | translate}}</label>\n\n                <label data-ng-if="$index!==0 && dependency.isExternal"\n                    data-y-popover\n                    data-trigger="\'hover\'"\n                    data-template="sync.getTemplateInfoForExternalComponent()"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__info-checkbox-label fd-form__label">\n                    {{::dependency.name | translate}}\n                </label>\n            </div>\n\n            <span data-ng-if="sync.buildInfoTemplate(dependency)"\n                data-y-popover\n                data-trigger="\'hover\'"\n                data-title="sync.getInfoTitle(dependency)"\n                data-template="sync.buildInfoTemplate(dependency)"\n                class="pull-right se-sync-panel__sync-info__right-icon"\n                data-ng-class="{\'se-sync-panel--icon-globe\': dependency.isExternal} ">\n                <span data-status="{{dependency.status}}"\n                    data-ng-if="!dependency.isExternal"\n                    class="se-sync-panel__sync-info-icon"\n                    data-ng-class="{\n                        \'sap-icon--accept\':sync.isInSync(dependency), \n                        \'sap-icon--message-warning\':!sync.isInSync(dependency)}"></span>\n                <span data-ng-if="dependency.isExternal"\n                    class="sap-icon--globe"></span>\n            </span>\n\n            <span data-ng-if="!sync.buildInfoTemplate(dependency)"\n                class="pull-right se-sync-panel__sync-info__right-icon">\n                <span data-status="{{dependency.status}}"\n                    class="se-sync-panel__sync-info-icon"\n                    data-ng-class="{\n                        \'sap-icon--accept\':sync.isInSync(dependency), \n                        \'sap-icon--message-warning\':!sync.isInSync(dependency)}"></span>\n            </span>\n        </div>\n    </div>\n\n    <div class="se-sync-panel__footer"\n        data-ng-if="sync.showSyncButton">\n        <button class="fd-button--emphasized se-sync-panel__footer__btn se-sync-panel__sync-btn"\n            data-ng-disabled="sync.isSyncButtonDisabled()"\n            data-ng-click="sync.syncItems()"\n            data-translate="se.cms.actionitem.page.sync"></button>\n    </div>\n</div>')}])},function(e,t){e.exports=smarteditcommons},function(e,t,n){var o=n(69);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(13)(o,i);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,".se-sync-panel-header {\n  padding: 0 20px 20px;\n  border-bottom: 1px solid #d9d9d9;\n  min-width: 400px; }\n\n.se-sync-panel__sub-header {\n  padding-top: 4px;\n  color: #51555a; }\n\n.se-sync-panel-header__new-page-message {\n  padding: 20px; }\n\n.se-sync-panel__message--new-page {\n  font-weight: 700;\n  padding-bottom: 4px; }\n\n.se-sync-panel-header__timestamp {\n  font-size: 0.85714rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  color: #51555a;\n  position: absolute;\n  left: 20px;\n  bottom: 23px;\n  width: 150px; }\n\n.se-sync-panel__sync-info {\n  max-height: 300px;\n  overflow-y: scroll; }\n\n.se-sync-panel__sync-info__row {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  padding: 0 20px;\n  height: 40px;\n  border-bottom: 1px solid #d9d9d9; }\n  .se-sync-panel__sync-info__row:first-child {\n    height: 50px; }\n  .se-sync-panel__sync-info__row:last-child {\n    border-bottom: none; }\n\n.se-sync-panel__info-checkbox {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin: 0 !important; }\n  .se-sync-panel__info-checkbox input {\n    margin: 0; }\n\n.fd-form__label.se-sync-panel__info-checkbox-label {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  word-break: break-all;\n  max-width: 190px !important;\n  margin: 0 !important;\n  padding-left: 8px;\n  color: #32363a;\n  text-transform: capitalize; }\n  .fd-form__label.se-sync-panel__info-checkbox-label--select-all {\n    font-weight: bold !important; }\n\n.se-sync-panel__sync-info__right-icon {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400; }\n\n.se-sync-panel__sync-info-icon.sap-icon--accept {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400;\n  color: #0a7e3e; }\n\n.se-sync-panel__sync-info-icon.sap-icon--message-warning {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400;\n  color: #e9730c; }\n\n.se-sync-panel__footer {\n  padding: 20px;\n  border-top: 1px solid #d9d9d9;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end; }\n\nbutton.se-sync-panel__footer__btn {\n  text-transform: capitalize;\n  padding: 8px 20px;\n  margin-left: 8px; }\n\n.se-modal__body .se-sync-panel-header, .se-modal__body .se-sync-panel__sync-info {\n  padding: 0;\n  border-bottom: none; }\n\n.se-synchronize-catalog {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end; }\n\n.se-synchronize-catalog__sync-info {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.se-synchronize-catalog__sync-btn button {\n  margin-left: 20px; }\n\n.se-synchronize-catalog__sync-info__sync-label,\n.catalog-last-synced {\n  color: #6a6d70;\n  display: block;\n  text-align: right;\n  margin: 0; }\n\n.se-synchronize-catalog__sync-info__sync-cata-name {\n  font-weight: 700;\n  color: #51555a; }\n\n.se-synchronize-catalog__in-progress {\n  color: #0a7e3e; }\n\n.se-synchronize-catalog__sync-failed {\n  color: #bb0000; }\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(i=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:o+s.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){var o=n(72);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(13)(o,i);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,".se-slot-popover {\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: column-reverse;\n          flex-direction: column-reverse;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center; }\n  .se-slot-popover__arrow {\n    opacity: 0;\n    margin-top: 15px;\n    position: relative;\n    width: 0;\n    border-bottom: 12px solid #d9d9d9;\n    border-right: 12px solid transparent;\n    border-left: 12px solid transparent;\n    z-index: 9999; }\n    .se-slot-popover__arrow--fill {\n      position: absolute;\n      top: 1px;\n      left: -11px;\n      width: 0;\n      border-bottom: 11px solid white;\n      border-right: 11px solid transparent;\n      border-left: 11px solid transparent; }\n  .se-slot-popover:before {\n    opacity: 0;\n    -webkit-box-shadow: 0 0 4px 0 #d9d9d9;\n            box-shadow: 0 0 4px 0 #d9d9d9;\n    z-index: 3125;\n    background-color: white;\n    color: #32363a;\n    border: 1px solid #d9d9d9;\n    border-radius: 4px;\n    content: attr(data-popover-content);\n    margin-bottom: calc(-5.2 * 15px);\n    padding: 10px;\n    white-space: nowrap; }\n\n[data-smartedit-component-type='ContentSlot']:hover .se-slot-popover:before {\n  opacity: 1;\n  margin-top: -1px; }\n\n[data-smartedit-component-type='ContentSlot']:hover .se-slot-popover__arrow {\n  opacity: 1; }\n",""])},function(e,t,n){var o=n(74);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(13)(o,i);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,'#smarteditoverlay .se-slot-ctx-menu__divider::after {\n  content: "";\n  background-color: white;\n  display: block;\n  position: absolute;\n  width: 1px;\n  height: 16px;\n  top: 8px;\n  left: -2px;\n  opacity: 0.6; }\n\n#smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-wrapper {\n  margin-right: 3px;\n  position: relative; }\n\n#smarteditoverlay .se-slot-ctx-menu__dropdown-toggle {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  font-size: 1.28571rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  background-color: transparent;\n  color: white;\n  width: 55px;\n  height: 32px;\n  border: none; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle:hover:not(.se-slot-ctx-menu__dropdown-toggle--open) {\n    opacity: 0.6; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle--open {\n    background-color: white;\n    color: #0a6ed1 !important; }\n    #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle--open .se-slot-ctx-menu__dropdown-toggle-add-on {\n      color: #0a6ed1; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-icon {\n    font-size: 1.28571rem;\n    line-height: 1.33333;\n    font-weight: 400; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-icon--disabled {\n    cursor: not-allowed; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-add-on {\n    margin-left: 4px;\n    font-size: 1rem;\n    line-height: 1.42857;\n    font-weight: 400;\n    color: white; }\n\n#smarteditoverlay .se-slot-ctx-menu__popover-ancor {\n  position: absolute;\n  display: block;\n  cursor: not-allowed;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0; }\n\n#smarteditoverlay .se-slot-contextual-menu__header {\n  padding: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  border-bottom: 1px solid #d9d9d9;\n  height: 53px; }\n  #smarteditoverlay .se-slot-contextual-menu__header:first-child {\n    font-size: 1.14286rem;\n    line-height: 1.25;\n    font-weight: 400;\n    color: #32363a; }\n\n#smarteditoverlay .se-slot__dropdown-menu.dropdown-menu {\n  border: none;\n  border-radius: 0;\n  -webkit-transform: translateY(-2px);\n          transform: translateY(-2px);\n  min-width: 265px; }\n\n#smarteditoverlay .se-sync-panel__info-checkbox input {\n  margin: 0; }\n\n#smarteditoverlay::before {\n  margin-right: 0 !important;\n  font-size: 1.71429rem;\n  line-height: 1.33333;\n  font-weight: 400; }\n\n#smarteditoverlay .se-sync-panel__sync-btn {\n  color: white; }\n\n#smarteditoverlay .se-slot-visility__component-list {\n  padding: 16px 20px;\n  list-style: none; }\n\n#smarteditoverlay .se-slot-visility__component-list-item {\n  margin-bottom: 16px; }\n  #smarteditoverlay .se-slot-visility__component-list-item:last-child {\n    margin-bottom: 0; }\n\n#smarteditoverlay .se-slot-visibility-wrapper {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start; }\n\n#smarteditoverlay .se-slot-visiblity-component__content {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-flex: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n#smarteditoverlay .se-slot-visiblity-component__description {\n  margin-right: 16px; }\n\n#smarteditoverlay .se-slot-visibility__icon-wrapper {\n  position: relative; }\n\n#smarteditoverlay .se-slot-visibility__icon {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  font-size: 1.71429rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  height: 48px;\n  width: 48px;\n  border-radius: 4px;\n  background-color: #2b78c5;\n  color: white;\n  margin-right: 16px; }\n  #smarteditoverlay .se-slot-visibility__icon--shared {\n    color: fd-type("text", 5);\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n#smarteditoverlay .se-slot-visibility__icon--shared {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 14px;\n  border-color: #354a5f transparent transparent #354a5f;\n  border-radius: 4px 0px 0px 0px; }\n  #smarteditoverlay .se-slot-visibility__icon--shared::before {\n    font-size: 1.14286rem;\n    line-height: 1.25;\n    font-weight: 400;\n    position: absolute;\n    left: -12px;\n    top: -15px;\n    color: white; }\n\n#smarteditoverlay .se-slot-visiblity-component__name, #smarteditoverlay .se-slot-visiblity-component__visibility {\n  color: #32363a; }\n\n#smarteditoverlay .se-slot-visiblity-component__name--link {\n  cursor: pointer;\n  color: #0a6ed1; }\n\n#smarteditoverlay .se-slot-visiblity-component__type {\n  color: #6a6d70; }\n\n#smarteditoverlay .slot-visiblity-component--globe-icon {\n  margin-left: 4px; }\n\n#smarteditoverlay .se-hidden-component-menu__toggle {\n  cursor: pointer;\n  color: #0a6ed1; }\n\n#smarteditoverlay .se-hidden-component-menu {\n  -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n  background-color: white;\n  border-radius: 4px !important;\n  min-width: 100px;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  position: absolute;\n  border: 1px solid #d9d9d9;\n  z-index: 2000;\n  top: 96%;\n  left: initial !important;\n  right: 0; }\n  #smarteditoverlay .se-hidden-component-menu::before {\n    height: 0;\n    width: 0;\n    border-style: solid;\n    border-width: 0 8px 8px 8px;\n    border-bottom-color: #d9d9d9;\n    border-bottom-color: var(var(--fd-color-neutral-4));\n    border-left-color: transparent;\n    border-right-color: transparent;\n    content: "";\n    position: absolute;\n    top: -8px; }\n  #smarteditoverlay .se-hidden-component-menu::after {\n    height: 0;\n    width: 0;\n    border-style: solid;\n    border-width: 0 8px 8px 8px;\n    border-bottom-color: white;\n    border-bottom-color: var(var(--fd-color-background-4));\n    border-left-color: transparent;\n    border-right-color: transparent;\n    content: "";\n    position: absolute;\n    top: -7px; }\n  #smarteditoverlay .se-hidden-component-menu::before, #smarteditoverlay .se-hidden-component-menu::after {\n    right: 10px; }\n  #smarteditoverlay .se-hidden-component-menu::before, #smarteditoverlay .se-hidden-component-menu::after {\n    display: none; }\n\n#smarteditoverlay .se-hidden-component-menu__item {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n#smarteditoverlay .se-hidden-component-menu__item-icon {\n  font-size: 0.85714rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  margin-right: 8px; }\n\n#smarteditoverlay .se-shared-slot__body {\n  padding: 16px 20px;\n  width: 350px; }\n\n#smarteditoverlay .se-shared-slot__sub-header {\n  margin-bottom: 12px; }\n\n#smarteditoverlay .se-shared-slot__option {\n  margin-bottom: 8px; }\n  #smarteditoverlay .se-shared-slot__option:last-child {\n    margin-bottom: 0; }\n\n#smarteditoverlay .se-shared-slot__description {\n  margin-bottom: 16px; }\n\n#smarteditoverlay .se-shared-slot__link {\n  cursor: pointer;\n  color: #0a6ed1;\n  text-decoration: none;\n  text-transform: capitalize; }\n  #smarteditoverlay .se-shared-slot__link:hover {\n    text-decoration: none;\n    color: #085caf; }\n',""])},function(e,t,n){"use strict";n.r(t);var o=n(1);function importAll(e){e.keys().forEach(function(t){e(t)})}var i=n(0),s=(n(15),n(9)),r=function(){function SlotContainerService(e,t,n,o,i,s,r){this.$q=e,this.lodash=t,this.experienceService=o;var a="/cmswebservices/v1/sites/"+i+"/catalogs/"+s+"/versions/"+r+"/pagescontentslotscontainers?pageId=:pageId";this.containersRestService=n.get(a)}var e,t,n;return SlotContainerService.$inject=["$q","lodash","restServiceFactory","experienceService","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION"],SlotContainerService.prototype.getComponentContainer=function(e,t){var n=this;return this.loadContainersInPageInfo().then(function(o){var i=o.filter(function(o){return o.slotId===e&&n.lodash.includes(o.components,t)});return i.length>0?i[0]:null})},SlotContainerService.prototype.loadContainersInPageInfo=function(){var e=this;return this.containersInPage?this.$q.when(this.containersInPage):this.experienceService.getCurrentExperience().then(function(t){return e.containersRestService.get({pageId:t.pageId})}).then(function(t){return e.containersInPage=t.pageContentSlotContainerList,e.containersInPage})},SlotContainerService=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof angular&&angular.IQService)?e:Object,Object,"function"==typeof(t=void 0!==i.IRestServiceFactory&&i.IRestServiceFactory)?t:Object,"function"==typeof(n=void 0!==i.IExperienceService&&i.IExperienceService)?n:Object,String,String,String])],SlotContainerService)}(),a=function(){function HiddenComponentMenuService(e,t,n){this.$q=e,this.contextualMenuService=t,this.slotContainerService=n,this.MENU_ITEM_EXTERNAL="externalcomponentbutton",this.MENU_ITEM_CLONE="clonecomponentbutton",this.MENU_ITEM_REMOVE="se.cms.remove",this.allowedItems={},this._setDefaultItemsAllowed()}var e,t;return HiddenComponentMenuService.$inject=["$q","contextualMenuService","slotContainerService"],HiddenComponentMenuService.prototype.allowItemsInHiddenComponentMenu=function(e){var t=this;e.forEach(function(e){t.allowedItems[e]=!0})},HiddenComponentMenuService.prototype.removeAllowedItemsInHiddenComponentMenu=function(e){var t=this;e.forEach(function(e){delete t.allowedItems[e]})},HiddenComponentMenuService.prototype.getAllowedItemsInHiddenComponentMenu=function(){return Object.keys(this.allowedItems)},HiddenComponentMenuService.prototype.getItemsForHiddenComponent=function(e,t){var n=this;return this._validateComponent(e),this._buildComponentInfo(t,e).then(function(t){return n._getAllowedItemsForComponent(e,t)})},HiddenComponentMenuService.prototype._validateComponent=function(e){if(!e)throw new Error("HiddenComponentMenuService - Component cannot be null.");if(!e.uid)throw new Error("HiddenComponentMenuService - Component needs a uid.");if(!e.typeCode)throw new Error("HiddenComponentMenuService - Component needs a type code.");if(!e.uuid)throw new Error("HiddenComponentMenuService - Component needs a uuid.")},HiddenComponentMenuService.prototype._setDefaultItemsAllowed=function(){this.allowItemsInHiddenComponentMenu([this.MENU_ITEM_EXTERNAL,this.MENU_ITEM_CLONE,this.MENU_ITEM_REMOVE])},HiddenComponentMenuService.prototype._buildComponentInfo=function(e,t){return this.slotContainerService.getComponentContainer(e,t.uuid).then(function(n){return{componentType:t.typeCode,componentId:t.uid,componentAttributes:{smarteditCatalogVersionUuid:t.catalogVersion,smarteditComponentId:t.uid,smarteditComponentType:t.componentType,smarteditComponentUuid:t.uuid,smarteditElementUuid:null},containerType:n?n.containerType:null,containerId:n?n.containerId:null,element:null,isComponentHidden:!0,slotId:e,iLeftBtns:0}})},HiddenComponentMenuService.prototype._getAllowedItemsForComponent=function(e,t){var n=this,o=[],i=[],r=this.contextualMenuService.getContextualMenuByType(e.typeCode);return(r=s.copy(r)).filter(function(e){return n.allowedItems[e.key]}).forEach(function(e){var s=n.$q.defer();i.push(s.promise),n.$q.when(!e.condition||e.condition(t)).then(function(t){t&&o.push(e),s.resolve()})}),this.$q.all(i).then(function(){return{buttons:o,configuration:t}})},HiddenComponentMenuService=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==s&&s.IQService)?e:Object,Object,"function"==typeof(t=void 0!==r&&r)?t:Object])],HiddenComponentMenuService)}(),c=function(){function SyncPollingService(e,t){this.systemEventService=e,this.SYNCHRONIZATION_POLLING=t,this.registerSyncPollingEvents()}var e,t;return SyncPollingService.$inject=["systemEventService","SYNCHRONIZATION_POLLING"],SyncPollingService.prototype.registerSyncPollingEvents=function(){this.systemEventService.subscribe(this.SYNCHRONIZATION_POLLING.SPEED_UP,this.changePollingSpeed.bind(this)),this.systemEventService.subscribe(this.SYNCHRONIZATION_POLLING.SLOW_DOWN,this.changePollingSpeed.bind(this))},SyncPollingService.prototype.changePollingSpeed=function(e,t){"proxyFunction";return null},SyncPollingService.prototype._fetchSyncStatus=function(e,t){"proxyFunction";return null},SyncPollingService.prototype.getSyncStatus=function(e,t){"proxyFunction";return null},SyncPollingService.prototype.performSync=function(e,t){"proxyFunction";return null},SyncPollingService=o.__decorate([Object(i.GatewayProxied)("getSyncStatus","_fetchSyncStatus","changePollingSpeed","registerSyncPollingEvents","performSync"),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==i.SystemEventService&&i.SystemEventService)?e:Object,"function"==typeof(t=void 0!==i.TypedMap&&i.TypedMap)?t:Object])],SyncPollingService)}(),l=n(2),d=n(8),u=n(4),p=n(6),m="/cmswebservices/v1/sites/"+i.CONTEXT_SITE_ID+"/cmsitems",h=new i.EvictionTag({event:"CMSITEMS_UPDATE"}),g=function(){function CmsitemsRestService(e,t){this.catalogService=t,this.cmsitemsUuidsUri="/cmswebservices/v1/sites/"+i.CONTEXT_SITE_ID+"/cmsitems/uuids",this.resource=e.get(m),this.versionedResource=e.get(m+"/:itemUuid"),this.uuidsResource=e.get(this.cmsitemsUuidsUri)}var e,t,n,s,r,a,c,l,d;return CmsitemsRestService.$inject=["restServiceFactory","catalogService"],CmsitemsRestService.prototype.create=function(e){var t=this;return this.catalogService.getCatalogVersionUUid().then(function(n){return e.catalogVersion=e.catalogVersion||n,void 0===e.onlyOneRestrictionMustApply&&(e.onlyOneRestrictionMustApply=!1),t.resource.save(e)})},CmsitemsRestService.prototype.getById=function(e){return this.resource.getById(e)},CmsitemsRestService.prototype.getByIdAndVersion=function(e,t){return this.versionedResource.get({itemUuid:e,versionId:t})},CmsitemsRestService.prototype.get=function(e){var t=this;return this.catalogService.retrieveUriContext().then(function(n){var o={catalogId:e.catalogId||n.CURRENT_CONTEXT_CATALOG,catalogVersion:e.catalogVersion||n.CURRENT_CONTEXT_CATALOG_VERSION};return e=u.merge(o,e),t.resource.get(e)})},CmsitemsRestService.prototype.getByIds=function(e){var t=this;return this.catalogService.getCatalogVersionUUid().then(function(n){return t.uuidsResource.save({catalogVersion:n,uuids:e})})},CmsitemsRestService.prototype.update=function(e){return this.resource.update(e)},CmsitemsRestService.prototype.delete=function(e){return this.resource.remove({identifier:e})},o.__decorate([Object(i.Cached)({actions:[i.rarelyChangingContent],tags:[i.userEvictionTag,h]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String]),o.__metadata("design:returntype","function"==typeof(e="undefined"!=typeof angular&&angular.IPromise)?e:Object)],CmsitemsRestService.prototype,"getById",null),o.__decorate([Object(i.Cached)({actions:[i.rarelyChangingContent],tags:[i.userEvictionTag,h]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String,String]),o.__metadata("design:returntype","function"==typeof(t="undefined"!=typeof angular&&angular.IPromise)?t:Object)],CmsitemsRestService.prototype,"getByIdAndVersion",null),o.__decorate([Object(i.Cached)({actions:[i.rarelyChangingContent],tags:[i.userEvictionTag,h]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype","function"==typeof(n="undefined"!=typeof angular&&angular.IPromise)?n:Object)],CmsitemsRestService.prototype,"get",null),o.__decorate([Object(i.Cached)({actions:[i.rarelyChangingContent],tags:[i.userEvictionTag,h]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Array]),o.__metadata("design:returntype","function"==typeof(s="undefined"!=typeof angular&&angular.IPromise)?s:Object)],CmsitemsRestService.prototype,"getByIds",null),o.__decorate([Object(i.InvalidateCache)(h),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",["function"==typeof(r=void 0!==p.CMSItem&&p.CMSItem)?r:Object]),o.__metadata("design:returntype","function"==typeof(a="undefined"!=typeof angular&&angular.IPromise)?a:Object)],CmsitemsRestService.prototype,"update",null),o.__decorate([Object(i.InvalidateCache)(h),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String]),o.__metadata("design:returntype","function"==typeof(c="undefined"!=typeof angular&&angular.IPromise)?c:Object)],CmsitemsRestService.prototype,"delete",null),CmsitemsRestService=o.__decorate([Object(i.OperationContextRegistered)(m.replace(/CONTEXT_SITE_ID/,":CONTEXT_SITE_ID"),"CMS"),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(l=void 0!==i.IRestServiceFactory&&i.IRestServiceFactory)?l:Object,"function"==typeof(d=void 0!==i.ICatalogService&&i.ICatalogService)?d:Object])],CmsitemsRestService)}(),S=function(e){function PageContentSlotsComponentsRestService(t,n,o,i,s,r,a){var c=e.call(this)||this;c.pageInfoService=n,c.cmsitemsRestService=o,c.lodash=i;var l="/cmswebservices/v1/sites/"+s+"/catalogs/"+r+"/versions/"+a+"/pagescontentslotscomponents?pageId=:pageId";return c.pagesContentSlotsComponentsRestService=t.get(l),c}var t,n,s,r;return PageContentSlotsComponentsRestService.$inject=["restServiceFactory","pageInfoService","cmsitemsRestService","lodash","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION"],o.__extends(PageContentSlotsComponentsRestService,e),PageContentSlotsComponentsRestService.prototype.clearCache=function(){},PageContentSlotsComponentsRestService.prototype.getComponentsForSlot=function(e){var t=this;return this.pageInfoService.getPageUID().then(function(n){return t.getSlotsToComponentsMapForPageUid(n).then(function(t){return t[e]||[]})})},PageContentSlotsComponentsRestService.prototype.getSlotsToComponentsMapForPageUid=function(e){var t=this;return this.getCachedSlotsToComponentsMapForPageUid(e).then(function(e){return t.lodash.cloneDeep(e)})},PageContentSlotsComponentsRestService.prototype.getCachedSlotsToComponentsMapForPageUid=function(e){var t=this;return this.pagesContentSlotsComponentsRestService.get({pageId:e}).then(function(e){var n=e.pageContentSlotComponentList,o=n.map(function(e){return e.componentUuid});return t.cmsitemsRestService.getByIds(o).then(function(e){var t=(e.response||[]).reduce(function(e,t){return e[t.uuid]=t,e},{});return n.reduce(function(e,n){return e[n.slotId]=e[n.slotId]||[],t[n.componentUuid]&&e[n.slotId].push(t[n.componentUuid]),e},{})})})},o.__decorate([Object(i.InvalidateCache)(l.slotEvictionTag),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],PageContentSlotsComponentsRestService.prototype,"clearCache",null),o.__decorate([Object(i.Cached)({actions:[i.rarelyChangingContent],tags:[h,i.pageChangeEvictionTag,l.slotEvictionTag]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String]),o.__metadata("design:returntype","function"==typeof(t="undefined"!=typeof angular&&angular.IPromise)?t:Object)],PageContentSlotsComponentsRestService.prototype,"getCachedSlotsToComponentsMapForPageUid",null),PageContentSlotsComponentsRestService=o.__decorate([Object(i.GatewayProxied)("clearCache","getSlotsToComponentsMapForPageUid"),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(n=void 0!==i.IRestServiceFactory&&i.IRestServiceFactory)?n:Object,"function"==typeof(s=void 0!==i.IPageInfoService&&i.IPageInfoService)?s:Object,Object,"function"==typeof(r=void 0!==u&&u.LoDashStatic)?r:Object,String,String,String])],PageContentSlotsComponentsRestService)}(d.a),v=function(e){function EditorModalService(){return e.call(this)||this}return o.__extends(EditorModalService,e),EditorModalService=o.__decorate([Object(i.GatewayProxied)("open","openAndRerenderSlot"),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",[])],EditorModalService)}(function(){function IEditorModalService(){}return IEditorModalService.prototype.open=function(e,t,n,o,i,s){"proxyFunction";return null},IEditorModalService.prototype.openAndRerenderSlot=function(e,t,n,o,i){"proxyFunction";return null},IEditorModalService}()),f=function(e){function ComponentSharedService(t,n){var o=e.call(this)||this;return o.componentInfoService=t,o.$q=n,o}var t;return ComponentSharedService.$inject=["componentInfoService","$q"],o.__extends(ComponentSharedService,e),ComponentSharedService.prototype.isComponentShared=function(e){var t=this;return("string"==typeof e?this.componentInfoService.getById(e):this.$q.when(e)).then(function(e){return e.slots?e.slots.length>1:t.$q.reject("ComponentSharedService::isComponentShared - Component must have slots property.")})},ComponentSharedService=o.__decorate([Object(i.GatewayProxied)(),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof angular&&angular.IQService)?t:Object])],ComponentSharedService)}(l.IComponentSharedService),y=function(e){function PageService(){return e.call(this)||this}return o.__extends(PageService,e),PageService=o.__decorate([Object(i.SeInjectable)(),Object(i.GatewayProxied)(),o.__metadata("design:paramtypes",[])],PageService)}(l.IPageService),_=function(e){function ContextAwareEditableItemService(){return e.call(this)||this}return o.__extends(ContextAwareEditableItemService,e),ContextAwareEditableItemService=o.__decorate([Object(i.SeInjectable)(),Object(i.GatewayProxied)(),o.__metadata("design:paramtypes",[])],ContextAwareEditableItemService)}(l.IContextAwareEditableItemService),b=function(){function CmsSmarteditServicesModule(){}return CmsSmarteditServicesModule=o.__decorate([Object(i.SeModule)({imports:["yLoDashModule","smarteditServicesModule",l.CmsConstantsModule],providers:[i.diNameUtils.makeValueProvider({cmsitemsUri:m}),g,v,c,r,f,a,l.AssetsService,l.CMSModesService,l.CMSTimeService,S,l.AttributePermissionsRestService,l.TypePermissionsRestService,y,_]})],CmsSmarteditServicesModule)}();window.__smartedit__.addDecoratorPayload("SeComponent","SlotSynchronizationPanel",{templateUrl:"slotSynchronizationPanelTemplate.html",inputs:["slotId"]});var C=function(){function SlotSynchronizationPanel(e,t,n,o,i){var s=this;this.pageService=e,this.pageInfoService=t,this.slotSynchronizationService=n,this.pageContentSlotsService=o,this.$translate=i,this.getSyncStatus=function(){return s.pageInfoService.getPageUID().then(function(e){return s.slotSynchronizationService.getSyncStatus(e,s.slotId).then(function(e){return s.isSyncDisallowed().then(function(t){return t&&s.disableSync(),e})})})},this.performSync=function(e){return s.slotSynchronizationService.performSync(e)}}var e,t,n,s;return SlotSynchronizationPanel.$inject=["pageService","pageInfoService","slotSynchronizationService","pageContentSlotsService","$translate"],SlotSynchronizationPanel.prototype.getApi=function(e){this.synchronizationPanelApi=e},SlotSynchronizationPanel.prototype.isSyncDisallowed=function(){var e=this;return this.isPageSlot().then(function(t){return e.isPageApproved().then(function(e){return t&&!e})})},SlotSynchronizationPanel.prototype.isPageSlot=function(){return this.pageContentSlotsService.getSlotStatus(this.slotId).then(function(e){return e===l.SlotStatus.PAGE||e===l.SlotStatus.OVERRIDE})},SlotSynchronizationPanel.prototype.isPageApproved=function(){var e=this;return this.pageInfoService.getPageUUID().then(function(t){return e.pageService.isPageApproved(t)})},SlotSynchronizationPanel.prototype.disableSync=function(){this.synchronizationPanelApi.setMessage({type:i.IAlertServiceType.WARNING,description:this.$translate.instant("se.cms.synchronization.slot.disabled.msg")}),this.synchronizationPanelApi.disableItemList(!0)},SlotSynchronizationPanel=o.__decorate([Object(i.SeComponent)({templateUrl:"slotSynchronizationPanelTemplate.html",inputs:["slotId"]}),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==l.IPageService&&l.IPageService)?e:Object,"function"==typeof(t=void 0!==i.IPageInfoService&&i.IPageInfoService)?t:Object,Object,Object,"function"==typeof(s="undefined"!=typeof angular&&void 0!==(n=angular.translate)&&n.ITranslateService)?s:Object])],SlotSynchronizationPanel)}(),I=n(7);window.__smartedit__.addDecoratorPayload("SeComponent","SharedComponentButton",{templateUrl:"sharedComponentButtonTemplate.html",inputs:["smarteditComponentId"]});var E=function(){function SharedComponentButton(e){this.contextAwareEditableItemService=e,this.isReady=!1}var e;return SharedComponentButton.$inject=["contextAwareEditableItemService"],SharedComponentButton.prototype.$onInit=function(){var e=this;this.contextAwareEditableItemService.isItemEditable(this.smarteditComponentId).then(function(t){e.isReady=!0,e.message="se.cms.contextmenu.shared.component.info.msg"+(t?".editable":"")})},SharedComponentButton=o.__decorate([Object(i.SeComponent)({templateUrl:"sharedComponentButtonTemplate.html",inputs:["smarteditComponentId"]}),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==I.a&&I.a)?e:Object])],SharedComponentButton)}(),T=function(){function CmsComponentsModule(){}return CmsComponentsModule=o.__decorate([Object(i.SeModule)({imports:["synchronizationPanelModule","slotSynchronizationServiceModule","pageContentSlotsServiceModule",b],declarations:[C,E]})],CmsComponentsModule)}();n(71);!function doImport(){importAll(n(32)),importAll(n(58))}();var O=function(){function Cmssmartedit(){}return Cmssmartedit=o.__decorate([Object(i.SeModule)({imports:[b,T,"cmsResourceLocationsModule","resourceLocationsModule","decoratorServiceModule","removeComponentServiceModule","experienceInterceptorModule","editorEnablerServiceModule","alertServiceModule","translationServiceModule","slotVisibilityButtonModule","slotVisibilityServiceModule","cmssmarteditTemplates","cmscommonsTemplates","smarteditServicesModule","slotSharedButtonModule","cmsDragAndDropServiceModule","slotSyncButtonModule","confirmationModalServiceModule","sharedSlotDisabledDecoratorModule","externalSlotDisabledDecoratorModule","slotRestrictionsServiceModule","slotSharedServiceModule","contextualMenuDropdownServiceModule","externalComponentDecoratorModule","externalComponentButtonModule","componentEditingFacadeModule","slotUnsharedButtonModule","componentInfoServiceModule"],initialize:["$rootScope","$q","$translate","alertService","assetsService","cmsDragAndDropService","componentHandlerService","pageInfoService","confirmationModalService","contextualMenuService","decoratorService","editorEnablerService","featureService","removeComponentService","slotRestrictionsService","slotSharedService","slotVisibilityService","componentEditingFacade","cmsitemsRestService","componentInfoService","componentSharedService","crossFrameEventService","EVENT_SMARTEDIT_COMPONENT_UPDATED","typePermissionsRestService",function(e,t,n,o,i,s,r,a,c,l,d,u,p,m,h,g,S,v,f,y,_,b,C,I){"ngInject";u.enableForComponents(["^((?!Slot).)*$"]),d.addMappings({"^((?!Slot).)*$":["se.contextualMenu","externalComponentDecorator"],"^.*Slot$":["se.slotContextualMenu","se.basicSlotContextualMenu","syncIndicator","sharedSlotDisabledDecorator","externalSlotDisabledDecorator"]}),p.addContextualMenuButton({key:"externalcomponentbutton",priority:100,nameI18nKey:"se.cms.contextmenu.title.externalcomponent",i18nKey:"se.cms.contextmenu.title.externalcomponentbutton",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=r.getParentSlotForComponent(e.element);return h.isSlotEditable(t).then(function(t){if(!t)return!1;var n=e.componentAttributes&&e.componentAttributes.smarteditCatalogVersionUuid;return n?a.getCatalogVersionUUIDFromPage().then(function(e){return n!==e}):r.isExternalComponent(e.componentId,e.componentType)})},action:{template:'<external-component-button data-catalog-version-uuid="ctrl.componentAttributes.smarteditCatalogVersionUuid"></external-component-button>'},displayClass:"externalcomponentbutton",displayIconClass:"hyicon hyicon-globe",displaySmallIconClass:"hyicon hyicon-globe"}),p.addContextualMenuButton({key:"se.cms.dragandropbutton",priority:200,nameI18nKey:"se.cms.contextmenu.title.dragndrop",i18nKey:"se.cms.contextmenu.title.dragndrop",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=r.getParentSlotForComponent(e.element);return h.isSlotEditable(t).then(function(t){return!!t&&I.hasUpdatePermissionForTypes([e.componentType]).then(function(t){return t[e.componentType]})})},action:{callbacks:{mousedown:function(){s.update()}}},displayClass:"movebutton",displayIconClass:"sap-icon--move",displaySmallIconClass:"sap-icon--move",permissions:["se.context.menu.drag.and.drop.component"]}),p.register({key:"se.cms.html5DragAndDrop",nameI18nKey:"se.cms.dragAndDrop.name",descriptionI18nKey:"se.cms.dragAndDrop.description",enablingCallback:function(){s.register(),s.apply()},disablingCallback:function(){s.unregister()}}),p.addContextualMenuButton({key:"se.cms.sharedcomponentbutton",priority:300,nameI18nKey:"se.cms.contextmenu.title.shared.component",i18nKey:"se.cms.contextmenu.title.shared.component",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=r.getParentSlotForComponent(e.element);return h.isSlotEditable(t).then(function(t){return!!t&&_.isComponentShared(e.componentAttributes.smarteditComponentUuid)})},action:{template:'<shared-component-button data-smartedit-component-id="ctrl.componentAttributes.smarteditComponentId"></shared-component-button>'},displayClass:"shared-component-button",displayIconClass:"sap-icon--chain-link",displaySmallIconClass:"sap-icon--chain-link",permissions:[]}),p.addContextualMenuButton({key:"se.cms.remove",priority:500,customCss:"se-contextual-more-menu__item--delete",i18nKey:"se.cms.contextmenu.title.remove",nameI18nKey:"se.cms.contextmenu.title.remove",regexpKeys:["^((?!Slot).)*$"],condition:function(e){if(!e.isComponentHidden){var t=r.getParentSlotForComponent(e.element);return h.isSlotEditable(t).then(function(t){return!!t&&I.hasDeletePermissionForTypes([e.componentType]).then(function(t){return t[e.componentType]})})}return I.hasDeletePermissionForTypes([e.componentType]).then(function(t){return t[e.componentType]})},action:{callback:function(e,t){var i,s;e.element?(i=r.getSlotOperationRelatedId(e.element),s=r.getSlotOperationRelatedType(e.element)):(i=e.containerId?e.containerId:e.componentId,s=e.containerId&&e.containerType?e.containerType:e.componentType);var a={description:"se.cms.contextmenu.removecomponent.confirmation.message",title:"se.cms.contextmenu.removecomponent.confirmation.title"};c.confirm(a).then(function(){m.removeComponent({slotId:e.slotId,slotUuid:e.slotUuid,componentId:e.componentId,componentType:e.componentType,componentUuid:e.componentAttributes.smarteditComponentUuid,slotOperationRelatedId:i,slotOperationRelatedType:s}).then(function(){S.reloadSlotsInfo(),b.publish(C,{componentId:e.componentId,componentType:e.componentType,requiresReplayingDecorators:!0}),n("se.cms.alert.component.removed.from.slot",{componentID:i,slotID:e.slotId}).then(function(e){o.showSuccess({message:e}),t.preventDefault(),t.stopPropagation()})})})}},displayClass:"removebutton",displayIconClass:"sap-icon--decline",displaySmallIconClass:"sap-icon--decline",permissions:["se.context.menu.remove.component"]}),p.addContextualMenuButton({key:"se.slotContextualMenuVisibility",nameI18nKey:"slotcontextmenu.title.visibility",regexpKeys:["^.*ContentSlot$"],action:{templateUrl:"slotVisibilityWidgetTemplate.html"},permissions:["se.slot.context.menu.visibility"]}),p.addContextualMenuButton({key:"se.slotSharedButton",nameI18nKey:"slotcontextmenu.title.shared.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotSharedTemplate.html"},permissions:["se.slot.context.menu.shared.icon"]}),p.addContextualMenuButton({key:"slotUnsharedButton",nameI18nKey:"slotcontextmenu.title.unshared.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotUnsharedButtonWrapperTemplate.html"},permissions:["se.slot.context.menu.unshared.icon"]}),p.addContextualMenuButton({key:"se.slotSyncButton",nameI18nKey:"slotcontextmenu.title.sync.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotSyncTemplate.html"},permissions:["se.sync.slot.context.menu"]}),p.addDecorator({key:"syncIndicator",nameI18nKey:"syncIndicator",permissions:["se.sync.slot.indicator"]}),p.register({key:"disableSharedSlotEditing",nameI18nKey:"se.cms.disableSharedSlotEditing",descriptionI18nKey:"se.cms.disableSharedSlotEditing.description",enablingCallback:function(){g.setSharedSlotEnablementStatus(!0)},disablingCallback:function(){g.setSharedSlotEnablementStatus(!1)}}),p.addDecorator({key:"sharedSlotDisabledDecorator",nameI18nKey:"se.cms.shared.slot.disabled.decorator",displayCondition:function(e,t){return Promise.all([h.isSlotEditable(t),r.isExternalComponent(t,e),g.isSlotShared(t)]).then(function(e){return!e[0]&&!e[1]&&e[2]})}}),p.addDecorator({key:"externalSlotDisabledDecorator",nameI18nKey:"se.cms.external.slot.disabled.decorator",displayCondition:function(e,t){return Promise.resolve(r.isExternalComponent(t,e))}}),p.addDecorator({key:"externalComponentDecorator",nameI18nKey:"se.cms.external.component.decorator",displayCondition:function(e,t){return Promise.resolve(r.isExternalComponent(t,e))}}),p.addContextualMenuButton({key:"clonecomponentbutton",priority:600,nameI18nKey:"se.cms.contextmenu.title.clone.component",i18nKey:"se.cms.contextmenu.title.clone.component",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var n=e.componentAttributes.smarteditComponentUuid;if(!e.isComponentHidden){var o=r.getParentSlotForComponent(e.element);return h.isSlotEditable(o).then(function(o){return!!o&&I.hasCreatePermissionForTypes([e.componentType]).then(function(o){return o[e.componentType]?y.getById(n).then(function(e){return e.cloneable}):t.when(!1)})})}return f.getById(n).then(function(e){return e.cloneable})},action:{callback:function(e){var t=r.getComponentPositionInSlot(e.slotId,e.componentAttributes.smarteditComponentId);v.cloneExistingComponentToSlot({targetSlotId:e.slotId,dragInfo:{componentId:e.componentAttributes.smarteditComponentId,componentType:e.componentType,componentUuid:e.componentAttributes.smarteditComponentUuid},position:t+1})}},displayClass:"clonebutton",displayIconClass:"sap-icon--duplicate",displaySmallIconClass:"sap-icon--duplicate",permissions:["se.clone.component"]})}]})],Cmssmartedit)}(),x=n(30),R=n(31),A=n(3);window.__smartedit__.addDecoratorPayload("Component","SyncIndicatorDecorator",{selector:"sync-indicator",template:n(27)});var P=function(e){function SyncIndicatorDecorator(t,n,o,i,s,r,a){var c=e.call(this)||this;return c.$q=t,c.catalogService=n,c.slotSynchronizationService=o,c.crossFrameEventService=i,c.pageInfoService=s,c.SYNCHRONIZATION_STATUSES=r,c.SYNCHRONIZATION_POLLING=a,c.isVersionNonActive=!1,c}var t,s,r,a,c,l;return SyncIndicatorDecorator.$inject=["$q","catalogService","slotSynchronizationService","crossFrameEventService","pageInfoService","SYNCHRONIZATION_STATUSES","SYNCHRONIZATION_POLLING"],o.__extends(SyncIndicatorDecorator,e),SyncIndicatorDecorator.prototype.ngOnInit=function(){var e=this;this.syncStatus={status:this.SYNCHRONIZATION_STATUSES.UNAVAILABLE},this.pageInfoService.getPageUUID().then(function(t){e.pageUUID=t,e.unRegisterSyncPolling=e.crossFrameEventService.subscribe(e.SYNCHRONIZATION_POLLING.FAST_FETCH,e.fetchSyncStatus.bind(e)),e.catalogService.isContentCatalogVersionNonActive().then(function(t){e.isVersionNonActive=t,e.isVersionNonActive&&e.fetchSyncStatus()})})},SyncIndicatorDecorator.prototype.ngOnDestroy=function(){this.unRegisterSyncPolling&&this.unRegisterSyncPolling()},SyncIndicatorDecorator.prototype.fetchSyncStatus=function(){var e=this;return this.isVersionNonActive?this.slotSynchronizationService.getSyncStatus(this.pageUUID,this.componentAttributes.smarteditComponentId).then(function(t){e.syncStatus=t},function(){e.syncStatus.status=e.SYNCHRONIZATION_STATUSES.UNAVAILABLE}):this.$q.when()},SyncIndicatorDecorator=o.__decorate([Object(i.SeDecorator)(),Object(A.Component)({selector:"sync-indicator",template:n(27)}),o.__param(0,Object(A.Inject)("$q")),o.__param(1,Object(A.Inject)("catalogService")),o.__param(2,Object(A.Inject)("slotSynchronizationService")),o.__param(3,Object(A.Inject)("crossFrameEventService")),o.__param(4,Object(A.Inject)("pageInfoService")),o.__param(5,Object(A.Inject)("SYNCHRONIZATION_STATUSES")),o.__param(6,Object(A.Inject)("SYNCHRONIZATION_POLLING")),o.__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof angular&&angular.IQService)?t:Object,"function"==typeof(s=void 0!==i.ICatalogService&&i.ICatalogService)?s:Object,Object,"function"==typeof(r=void 0!==i.CrossFrameEventService&&i.CrossFrameEventService)?r:Object,"function"==typeof(a=void 0!==i.IPageInfoService&&i.IPageInfoService)?a:Object,"function"==typeof(c=void 0!==i.TypedMap&&i.TypedMap)?c:Object,"function"==typeof(l=void 0!==i.TypedMap&&i.TypedMap)?l:Object])],SyncIndicatorDecorator)}(i.AbstractDecorator),N=(n(73),function(){function CmssmarteditModule(){}return CmssmarteditModule=o.__decorate([Object(i.SeEntryModule)("cmssmartedit"),Object(A.NgModule)({imports:[x.BrowserModule,R.UpgradeModule],declarations:[P],entryComponents:[P],providers:[i.diBridgeUtils.upgradeProvider("$q"),i.diBridgeUtils.upgradeProvider("catalogService"),i.diBridgeUtils.upgradeProvider("slotSynchronizationService"),i.diBridgeUtils.upgradeProvider("crossFrameEventService"),i.diBridgeUtils.upgradeProvider("pageInfoService"),i.diBridgeUtils.upgradeProvider("SYNCHRONIZATION_STATUSES"),i.diBridgeUtils.upgradeProvider("SYNCHRONIZATION_POLLING")]})],CmssmarteditModule)}());n.d(t,"Cmssmartedit",function(){return O}),n.d(t,"CmssmarteditModule",function(){return N})}]);